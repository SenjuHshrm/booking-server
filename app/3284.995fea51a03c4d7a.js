"use strict";(self.webpackChunkbooking_app=self.webpackChunkbooking_app||[]).push([[3284],{3284:(ct,u,o)=>{o.r(u),o.d(u,{ListingApplicationModule:()=>at});var l=o(4006),d=o(6895),h=o(9299),m=o(7974),C=o(727),A=o(7579),x=o(2843),T=o(8372),v=o(3900),L=o(262),t=o(4650),p=o(671),Z=o(5673),b=o(5439),f=o(7009),M=o(5412),y=o(1820),w=o(3071),O=o(9083),P=o(7556),_=o(7392),g=o(8255);function N(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Cover Photo"),t.qZA())}function Y(n,e){if(1&n&&t._UZ(0,"img",26),2&n){const i=t.oxw().$implicit;t.Q6J("src",i.cover,t.LSH)}}function U(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1,"No cover yet"),t.qZA())}function D(n,e){if(1&n&&(t.TgZ(0,"td",22)(1,"div",23),t.YNc(2,Y,1,1,"img",24),t.qZA(),t.YNc(3,U,2,0,"div",25),t.qZA()),2&n){const i=e.$implicit;t.xp6(2),t.Q6J("ngIf",""!==i.cover),t.xp6(1),t.Q6J("ngIf",""===i.cover)}}function Q(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Name"),t.qZA())}function J(n,e){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i.name," ")}}function I(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Type"),t.qZA())}function S(n,e){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i.placeType," ")}}function F(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Description Filter"),t.qZA())}function z(n,e){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.hij(" ",i.descriptionFilter," ")}}function B(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Approved"),t.qZA())}function R(n,e){if(1&n&&(t.TgZ(0,"td",22),t._UZ(1,"mat-icon",27),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.Q6J("fontIcon",i.isApproved?"check_circle":"close")}}function j(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Listed"),t.qZA())}function q(n,e){if(1&n&&(t.TgZ(0,"td",22),t._UZ(1,"mat-icon",27),t.qZA()),2&n){const i=e.$implicit;t.xp6(1),t.Q6J("fontIcon",i.isListed?"check_circle":"close")}}function $(n,e){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Action"),t.qZA())}function k(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.handleReqSupportDocs(a.host._id,a._id))}),t._uU(1," Request Supporting Documents "),t.qZA()}}function H(n,e){1&n&&(t.TgZ(0,"button",33),t._uU(1," View Supporting Documents "),t.qZA())}function E(n,e){1&n&&(t.TgZ(0,"button",33),t._uU(1," Approve Listing "),t.qZA())}function G(n,e){1&n&&(t.TgZ(0,"button",33),t._uU(1," Disapprove Listing "),t.qZA())}function K(n,e){1&n&&(t.TgZ(0,"button",33),t._uU(1," Add to Listing "),t.qZA())}function V(n,e){1&n&&(t.TgZ(0,"button",33),t._uU(1," Remove from Listing "),t.qZA())}function X(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"td",22)(1,"button",28)(2,"mat-icon"),t._uU(3,"more_horiz"),t.qZA()(),t.TgZ(4,"mat-menu",null,29)(6,"button",30),t.NdJ("click",function(){const c=t.CHM(i).$implicit,r=t.oxw();return t.KtG(r.openListing(c._id))}),t._uU(7," View Details "),t.qZA(),t.YNc(8,k,2,0,"button",31),t.YNc(9,H,2,0,"button",32),t.YNc(10,E,2,0,"button",32),t.YNc(11,G,2,0,"button",32),t.YNc(12,K,2,0,"button",32),t.YNc(13,V,2,0,"button",32),t.qZA()()}if(2&n){const i=e.$implicit,s=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",s),t.xp6(7),t.Q6J("ngIf",null===i.documents),t.xp6(1),t.Q6J("ngIf",null!==i.documents),t.xp6(1),t.Q6J("ngIf",!i.isApproved),t.xp6(1),t.Q6J("ngIf",i.isApproved),t.xp6(1),t.Q6J("ngIf",!i.isListed),t.xp6(1),t.Q6J("ngIf",i.isListed)}}function W(n,e){1&n&&t._UZ(0,"tr",34)}function tt(n,e){1&n&&t._UZ(0,"tr",35)}function nt(n,e){1&n&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2,"No Listing Found."),t.qZA()())}const it=function(){return[5,10,25]},et=[{path:"",component:(()=>{class n{constructor(i,s,a,c,r){this._md=i,this._staycation=s,this._user=a,this._basicUtil=c,this._auth=r,this._snack=(0,t.f3M)(f.ux),this.totalListings=0,this.searchInput="",this.currentPageList=[],this.dataSource=new p.by([]),this.displayedColumns=["cover","name","placeType","desc","approved","listed","action"],this._sub=new C.w0,this._modelChanged=new A.x,this.debTime=500}ngOnInit(){this._sub.add(this._modelChanged.pipe((0,T.b)(this.debTime)).subscribe(()=>{this._getList(this.paginator.pageIndex+1,this.paginator.pageSize)}))}ngAfterViewInit(){this._getList(this.paginator.pageIndex+1,this.paginator.pageSize)}ngOnDestroy(){this._sub.unsubscribe()}handleViewListing(i){}handleSearch(i){this._modelChanged.next(i.target.value)}handleReqSupportDocs(i,s){let a=b().format("MM/DD/YYYY");this._sub.add(this._auth.csrfToken().pipe((0,v.w)(c=>this._user.requestSupportDocs(i,s,a,c.token)),(0,L.K)(c=>(0,x._)(()=>c))).subscribe({next:c=>{console.log(c)},error:({error:c})=>{this._snack.open(c.msg||c.code||"Failed to request supporting documents.","Ok")}}))}handlePageChange(i){this._getList(i.pageIndex+1,i.pageSize)}openListing(i){this._md.open(Z.$,{width:"80%",height:"90vh",data:i,disableClose:!0}).afterClosed().subscribe(a=>{})}_getList(i,s){this.currentPageList=[],this._sub.add(this._staycation.getAllStaycations(i,s,this.searchInput).subscribe({next:a=>{console.log(a),this.totalListings=a.total,a.list.forEach(c=>{this.currentPageList.push({...c,cover:this._basicUtil.setImgUrl(c.cover)})}),this.dataSource=new p.by(this.currentPageList),this.dataSource.paginator=this.paginator},error:({})=>{}}))}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(M.uw),t.Y36(y.x),t.Y36(w.K),t.Y36(O.M),t.Y36(P.e))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-listing-application"]],viewQuery:function(s,a){if(1&s&&t.Gf(m.NW,5),2&s){let c;t.iGM(c=t.CRH())&&(a.paginator=c.first)}},decls:36,vars:7,consts:[[1,"listing-container"],[1,"listing-container-wrapper"],[1,"listing-search","card"],[1,"icon"],["type","text","name","search","placeholder","Search listing",3,"ngModel","ngModelChange","input"],[1,"table"],["mat-table","",3,"dataSource"],["matColumnDef","cover"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","placeType"],["matColumnDef","desc"],["matColumnDef","approved"],["matColumnDef","listed"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[1,"custom-property"],[3,"src",4,"ngIf"],[4,"ngIf"],[3,"src"],[3,"fontIcon"],["mat-button","",1,"action-btn",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","td-no-value"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"div",3)(5,"mat-icon"),t._uU(6,"search"),t.qZA()(),t.TgZ(7,"input",4),t.NdJ("ngModelChange",function(r){return a.searchInput=r})("input",function(r){return a.handleSearch(r)}),t.qZA()()(),t.TgZ(8,"div",5)(9,"table",6),t.ynx(10,7),t.YNc(11,N,2,0,"th",8),t.YNc(12,D,4,2,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Q,2,0,"th",8),t.YNc(15,J,2,1,"td",9),t.BQk(),t.ynx(16,11),t.YNc(17,I,2,0,"th",8),t.YNc(18,S,2,1,"td",9),t.BQk(),t.ynx(19,12),t.YNc(20,F,2,0,"th",8),t.YNc(21,z,2,1,"td",9),t.BQk(),t.ynx(22,13),t.YNc(23,B,2,0,"th",8),t.YNc(24,R,2,1,"td",9),t.BQk(),t.ynx(25,14),t.YNc(26,j,2,0,"th",8),t.YNc(27,q,2,1,"td",9),t.BQk(),t.ynx(28,15),t.YNc(29,$,2,0,"th",8),t.YNc(30,X,14,7,"td",9),t.BQk(),t.YNc(31,W,1,0,"tr",16),t.YNc(32,tt,1,0,"tr",17),t.YNc(33,nt,3,0,"tr",18),t.qZA()(),t.TgZ(34,"mat-paginator",19,20),t.NdJ("page",function(r){return a.handlePageChange(r)}),t.qZA()()()),2&s&&(t.xp6(7),t.Q6J("ngModel",a.searchInput),t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalListings)("pageSizeOptions",t.DdM(6,it)))},dependencies:[d.O5,_.Hw,m.NW,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,p.Ee,g.VK,g.OP,g.p6,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F],styles:[".listing-container[_ngcontent-%COMP%]{position:relative;height:100%}.listing-container-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.listing-container-wrapper[_ngcontent-%COMP%]   .listing-search[_ngcontent-%COMP%]{margin:1rem 0 .5rem;background-color:#fff;box-shadow:1px 1px 5px #8887;border-radius:5px;display:flex;align-items:center;justify-content:space-between;width:100%;max-width:30rem;gap:.1rem;border:1px solid lightgray}.listing-container-wrapper[_ngcontent-%COMP%]   .listing-search[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:50px;width:20%;height:100%;display:flex;justify-content:center;align-items:center;color:#68a86a;cursor:pointer}.listing-container-wrapper[_ngcontent-%COMP%]   .listing-search[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px;height:auto;width:auto}.listing-container-wrapper[_ngcontent-%COMP%]   .listing-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background-color:transparent;height:100%;width:100%;font-size:1rem;padding:1rem}.listing-container-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.listing-container-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:12rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.listing-container-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;outline:none;cursor:pointer}.listing-container-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.td-no-value[_ngcontent-%COMP%]{padding:1rem 0;text-align:center}.custom-property[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:.3rem 0}.custom-property[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;object-fit:fill;border:1px solid #a0a0a0;border-radius:2px}"]})}return n})()}];let ot=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#n=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(et),h.Bz]})}return n})(),at=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#n=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[d.ez,ot,_.Ps,m.TU,p.p0,g.Tx,l.u5,l.UX,f.ZX]})}return n})()}}]);