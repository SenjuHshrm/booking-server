"use strict";(self.webpackChunkbooking_app=self.webpackChunkbooking_app||[]).push([[4794],{5016:(J,P,g)=>{g.d(P,{S:()=>w});var d=g(5412),h=g(4650),t=g(7392);let w=(()=>{class c{constructor(u,p){this.dialogRef=u,this.data=p}closeValidation(u){this.dialogRef.close({confirm:u})}static#t=this.\u0275fac=function(p){return new(p||c)(h.Y36(d.so),h.Y36(d.WI))};static#e=this.\u0275cmp=h.Xpm({type:c,selectors:[["app-confirmation"]],decls:17,vars:4,consts:[[1,"more-info"],[1,"header"],[1,"title"],[1,"close-button-normal",3,"click"],[1,"content"],[1,"footer"],[1,"main-button","custom_btn",3,"click"],[1,"main-button",3,"click"]],template:function(p,_){1&p&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._uU(3),h.qZA(),h.TgZ(4,"div",3),h.NdJ("click",function(){return _.closeValidation(!1)}),h.TgZ(5,"mat-icon"),h._uU(6,"close"),h.qZA()()(),h._UZ(7,"hr"),h.TgZ(8,"div",4)(9,"div",2),h._uU(10),h.qZA()(),h._UZ(11,"hr"),h.TgZ(12,"div",5)(13,"button",6),h.NdJ("click",function(){return _.closeValidation(!0)}),h._uU(14),h.qZA(),h.TgZ(15,"button",7),h.NdJ("click",function(){return _.closeValidation(!1)}),h._uU(16),h.qZA()()()),2&p&&(h.xp6(3),h.Oqu(_.data.title),h.xp6(7),h.hij(" ",_.data.description," "),h.xp6(4),h.hij(" ",_.data.yesBtnText," "),h.xp6(2),h.hij(" ",_.data.noBtnText," "))},dependencies:[t.Hw],styles:[".more-info[_ngcontent-%COMP%]{font-family:Poppins-Regular!important;background-color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;display:flex;flex-direction:column;height:100%}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex:0;display:flex;width:100%;align-items:center;justify-content:center;padding:.5rem 1rem;justify-content:space-between}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:grid;place-content:center;height:100%;text-align:start}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.25rem;line-height:2rem;padding:.7rem;white-space:pre-line}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:1rem 0;flex:0;display:flex;justify-content:center;gap:1rem}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .custom_btn[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #68a968;color:#68a968}"]})}return c})()},4461:(J,P,g)=>{g.d(P,{T:()=>c});var d=g(4650),h=g(6895);function t(C,u){if(1&C&&(d.TgZ(0,"span",2),d._uU(1),d.qZA()),2&C){const p=d.oxw().$implicit;d.xp6(1),d.Oqu(p.message)}}function w(C,u){if(1&C&&(d.TgZ(0,"div"),d.YNc(1,t,2,1,"span",1),d.qZA()),2&C){const p=u.$implicit,_=d.oxw();d.xp6(1),d.Q6J("ngIf",(null==_.form.controls[p.field].errors?null:_.form.controls[p.field].errors[p.error])&&((null==_.form.controls[p.field]?null:_.form.controls[p.field].dirty)||(null==_.form.controls[p.field]?null:_.form.controls[p.field].touched)))}}let c=(()=>{class C{constructor(){this.errors=[]}static#t=this.\u0275fac=function(_){return new(_||C)};static#e=this.\u0275cmp=d.Xpm({type:C,selectors:[["app-input-error-message"]],inputs:{form:"form",errors:"errors"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","val-err-msg",4,"ngIf"],[1,"val-err-msg"]],template:function(_,m){1&_&&d.YNc(0,w,2,1,"div",0),2&_&&d.Q6J("ngForOf",m.errors)},dependencies:[h.sg,h.O5],styles:[".val-err-msg[_ngcontent-%COMP%]{font-size:15px;margin-top:5px;font-family:Poppins-Regular}"]})}return C})()},4794:(J,P,g)=>{g.r(P),g.d(P,{TodayModule:()=>bo});var d=g(6895),h=g(9299),t=g(4650),w=g(2972),c=g(671),C=g(7974),u=g(7893),p=g(3900),_=g(262),m=g(4006),f=g(5412),x=g(7009),T=g(727),A=g(1321),z=g(3071),D=g(9083),K=g(2684),U=g(7556),M=g(7392),j=g(4461),O=g(1572);function W(n,i){if(1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19),t._UZ(3,"img",20),t.qZA(),t.TgZ(4,"div")(5,"div",21),t._uU(6),t.qZA(),t.TgZ(7,"div"),t._uU(8,"Proprietor"),t.qZA()()(),t.TgZ(9,"div",22)(10,"mat-icon"),t._uU(11,"forward"),t.qZA()(),t.TgZ(12,"div",18)(13,"div",19),t._UZ(14,"img",20),t.qZA(),t.TgZ(15,"div")(16,"div",21),t._uU(17),t.qZA(),t.TgZ(18,"div"),t._uU(19,"Guest"),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(3),t.s9C("src",e.proprietorImage,t.LSH),t.Q6J("draggable",!1),t.xp6(3),t.Oqu(e.proprietorName),t.xp6(8),t.s9C("src",e.guestImage,t.LSH),t.Q6J("draggable",!1),t.xp6(3),t.Oqu(e.guestName)}}function X(n,i){1&n&&(t.TgZ(0,"div",23)(1,"span",24),t._UZ(2,"mat-spinner",25),t._uU(3," Loading User Data..."),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("diameter",15))}function tt(n,i){1&n&&(t.TgZ(0,"span"),t._UZ(1,"mat-spinner",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",20))}function et(n,i){1&n&&(t.TgZ(0,"span",26),t._uU(1,"Send Message "),t.TgZ(2,"mat-icon"),t._uU(3,"send"),t.qZA()())}let Y=(()=>{class n{constructor(e,a,o,r,s,y,k,b){this.fb=e,this.dialogRef=a,this.data=o,this._token=r,this.userService=s,this.util=y,this.messageService=k,this._auth=b,this.isLoading=!1,this.isDataLoading=!1,this.subscription=new T.w0,this.messageErrors=[{field:"message",error:"required",message:"Message is required."},{field:"message",error:"maxlength",message:"Message must not exceed 1000 characters."}],this._snack=(0,t.f3M)(x.ux),this.token=this._token.decodedToken()}ngOnInit(){this.isDataLoading=!0,this.subscription.add(this.userService.getUserProfile(this.token.sub).subscribe({next:e=>{this.authData=e,this.isDataLoading=!1},error:({error:e})=>{this.isDataLoading=!1,this._snack.open(e.code,"",{duration:1e3})}})),this.messageForm=this.fb.group({message:new m.NI("",{validators:[m.kI.required,m.kI.maxLength(1e3)]})})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}closeDialogMessage(){this.isLoading||this.dialogRef.close()}onSubmit(e){if(!e.valid)return void e.markAllAsTouched();this.isLoading=!0;const a=e.getRawValue(),o={from:this.token.sub,type:"text",text:a.message},r=this.data._id;this.subscription.add(this._auth.csrfToken().pipe((0,p.w)(s=>this.messageService.messageProprietor(o,r,s.token)),(0,_.K)(s=>s)).subscribe({next:s=>{this.isLoading=!1,this.closeDialogMessage()},error:s=>{this.isLoading=!1}}))}get proprietorName(){return this.util.constructName(this.authData.profile.name)}get proprietorImage(){const e=this.token.img;return e.includes("gravatar.com")?e:this.util.setImgUrl(e)}get guestName(){return this.data.fullName}get guestImage(){const e=this.data.img;return e.includes("gravatar.com")?e:this.util.setImgUrl(e)}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(m.qu),t.Y36(f.so),t.Y36(f.WI),t.Y36(A.B),t.Y36(z.K),t.Y36(D.M),t.Y36(K.e),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-message-guest-modal"]],decls:23,vars:8,consts:[[3,"ngSubmit"],[1,"message_modal"],[1,"header"],[1,"title"],[1,"close-button-normal",3,"click"],[1,"message_modal-content"],["class","details-user-avatar",4,"ngIf"],["style","display: grid; place-items: center",4,"ngIf"],[1,"message_modal_input"],[1,"input-wrapper"],[1,"label"],["formControlName","message","type","text","name","street","placeholder","Type here..",3,"readonly"],[3,"form","errors"],[1,"footer"],["type","submit",1,"main-button",3,"disabled"],[4,"ngIf"],["style","display: block; display: flex; align-items: center; gap: 10px",4,"ngIf"],[1,"details-user-avatar"],[1,"wrapper"],[1,"image-avatar"],["loading","lazy","alt","Avatar",3,"src","draggable"],[1,"name"],[1,"forward_icon"],[2,"display","grid","place-items","center"],[2,"display","flex","align-items","center","gap","0.25rem"],[3,"diameter"],[2,"display","block","display","flex","align-items","center","gap","10px"]],template:function(a,o){1&a&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit(o.messageForm)}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Message Guest"),t.qZA(),t.TgZ(5,"div",4),t.NdJ("click",function(){return o.closeDialogMessage()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t._UZ(8,"hr"),t.TgZ(9,"div",5),t.YNc(10,W,20,6,"div",6),t.YNc(11,X,4,1,"div",7),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10),t._uU(15,"Type your message to this guest"),t.qZA(),t.TgZ(16,"textarea",11),t._uU(17,"          "),t.qZA(),t._UZ(18,"app-input-error-message",12),t.qZA()()(),t.TgZ(19,"div",13)(20,"button",14),t.YNc(21,tt,2,1,"span",15),t.YNc(22,et,4,0,"span",16),t.qZA()()()()),2&a&&(t.xp6(10),t.Q6J("ngIf",!o.isDataLoading),t.xp6(1),t.Q6J("ngIf",o.isDataLoading),t.xp6(5),t.Q6J("readonly",o.isLoading||o.isDataLoading),t.xp6(2),t.Q6J("form",o.messageForm)("errors",o.messageErrors),t.xp6(2),t.Q6J("disabled",o.isLoading||o.isDataLoading),t.xp6(1),t.Q6J("ngIf",!0===o.isLoading),t.xp6(1),t.Q6J("ngIf",!1===o.isLoading))},dependencies:[d.O5,M.Hw,j.T,m._Y,m.Fj,m.JJ,m.JL,m.F,O.Ou,m.u],styles:[".message_modal[_ngcontent-%COMP%]{font-family:Poppins-Regular!important;background-color:#fff;padding-bottom:1.5rem;border-bottom-right-radius:5px;border-bottom-left-radius:5px;display:flex;flex-direction:column;height:100%;overflow:auto}.message_modal[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex:0;display:flex;width:100%;align-items:center;padding:.5rem 1rem;justify-content:space-between}.message_modal[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1rem,1.1vw,8rem);font-weight:700}.message_modal-content[_ngcontent-%COMP%]{height:100%;flex:1;display:flex;flex-direction:column;gap:1rem;padding:1rem;overflow-y:auto}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;margin:0rem 0 1rem}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .image-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;width:3rem;height:3rem;object-fit:cover;object-position:center;border:1px solid #68A968}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:clamp(1rem,.8vw,8rem)}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .years[_ngcontent-%COMP%]{font-size:.8rem;color:#68a968}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .forward_icon[_ngcontent-%COMP%]{color:#63ab68}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .message_proprietor[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border-radius:10px;padding:auto 0 auto;display:inline-flex;align-items:center;gap:1rem;border:2px solid #68A968;background-color:transparent;padding:.5rem 1rem;color:#68a968;font-size:1rem}.message_modal-content[_ngcontent-%COMP%]   .details-user-avatar[_ngcontent-%COMP%]   .message_proprietor[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center}.message_modal-content[_ngcontent-%COMP%]   .message_modal_input[_ngcontent-%COMP%]{flex:1}.message_modal-content[_ngcontent-%COMP%]   .message_modal_input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:.3rem}.message_modal-content[_ngcontent-%COMP%]   .message_modal_input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:1rem;border:2px solid #63AB68;width:100%;height:10rem;border-radius:10px;font-family:Poppins-Medium;font-size:15px;resize:none}.message_modal[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{flex:0;width:100%}.message_modal[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:auto}.message_modal[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0}"]})}return n})(),R=(()=>{class n{constructor(e){this.dialogRef=e}closeValidation(){this.dialogRef.close()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.so))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-validation-modal"]],decls:20,vars:0,consts:[[1,"more-info"],[1,"header"],[1,"title"],[1,"close-button-normal",3,"click"],[1,"content"],[1,"footer"],[1,"main-button","custom_btn",3,"click"],[1,"main-button"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," For Approval "),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return o.closeValidation()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t._UZ(7,"hr"),t.TgZ(8,"div",4)(9,"div",2),t._uU(10,"Are you sure you want to approved "),t.TgZ(11,"span"),t._uU(12,"(guest name's)"),t.qZA(),t._uU(13," booking?"),t.qZA()(),t._UZ(14,"hr"),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){return o.closeValidation()}),t._uU(17,"Cancel"),t.qZA(),t.TgZ(18,"button",7),t._uU(19,"Approved"),t.qZA()()())},dependencies:[M.Hw],styles:[".more-info[_ngcontent-%COMP%]{font-family:Poppins-Regular!important;background-color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;display:flex;flex-direction:column;height:100%;overflow:auto}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex:0;display:flex;width:100%;align-items:center;justify-content:center;padding:.5rem 1rem;justify-content:space-between}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;display:grid;place-content:center;height:100%;overflow-y:auto;text-align:center}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1rem,1.1vw,4rem);line-height:2rem;padding:.7rem}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:1rem 0;flex:0;display:flex;justify-content:center;gap:1rem}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .custom_btn[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #68A968;color:#68a968}"]})}return n})();var v=g(5439),N=g(5016),Z=g(2169);const E=function(n){return{display:n}};function nt(n,i){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32)(2,"div",18),t._uU(3,"Guest Account Verification"),t.qZA(),t.TgZ(4,"div",33),t._uU(5," This account is not verified. "),t.qZA()(),t.TgZ(6,"div",34)(7,"div",35)(8,"div")(9,"div",36)(10,"div",37)(11,"mat-icon"),t._uU(12,"check"),t.qZA()(),t.TgZ(13,"div"),t._uU(14,"Identification Card Verified"),t.qZA()(),t.TgZ(15,"div",36)(16,"div",37)(17,"mat-icon"),t._uU(18,"check"),t.qZA()(),t.TgZ(19,"div"),t._uU(20,"Mobile Number Verified"),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngStyle",t.VKq(2,E,e.verifiedIdCard&&e.verifiedMobileNumber?"none":"block")),t.xp6(2),t.Q6J("ngStyle",t.VKq(4,E,e.verifiedIdCard&&e.verifiedMobileNumber?"block":"none"))}}function ot(n,i){1&n&&(t.TgZ(0,"div",38)(1,"span"),t._UZ(2,"mat-spinner",39),t._uU(3," Loading Guest Verification Data"),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("diameter",15))}function at(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Approved"),t.qZA())}function it(n,i){1&n&&(t.TgZ(0,"span"),t._UZ(1,"mat-spinner",39),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",20))}function rt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Decline"),t.qZA())}function st(n,i){1&n&&(t.TgZ(0,"span"),t._UZ(1,"mat-spinner",39),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",20))}function ct(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmApproveModal())}),t.YNc(2,at,2,0,"span",27),t.YNc(3,it,2,1,"span",27),t.qZA(),t.TgZ(4,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmDeclineModal())}),t.YNc(5,rt,2,0,"span",27),t.YNc(6,st,2,1,"span",27),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.statusLoading),t.xp6(1),t.Q6J("ngIf",!e.statusLoading),t.xp6(1),t.Q6J("ngIf",e.statusLoading),t.xp6(1),t.Q6J("disabled",e.statusLoading),t.xp6(1),t.Q6J("ngIf",!e.statusLoading),t.xp6(1),t.Q6J("ngIf",e.statusLoading)}}function dt(n,i){1&n&&(t.TgZ(0,"div")(1,"div",25)(2,"div",26),t._uU(3,"Payment Type"),t.qZA(),t.TgZ(4,"div",26),t._uU(5,"Fully Paid"),t.qZA()(),t.TgZ(6,"div",25)(7,"div",26),t._uU(8,"Total Payment"),t.qZA(),t.TgZ(9,"div",26),t._uU(10,"1500"),t.qZA()(),t.TgZ(11,"div",25)(12,"div",26),t._uU(13,"Balance"),t.qZA(),t.TgZ(14,"div",26),t._uU(15,"600"),t.qZA()()())}function lt(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"hr"),t.qZA())}function pt(n,i){1&n&&(t.TgZ(0,"div")(1,"div",18),t._uU(2,"Your Earnings"),t.qZA(),t.TgZ(3,"div",23),t._uU(4,"Your earnings from this booking."),t.qZA(),t.TgZ(5,"div",28)(6,"div",42),t._uU(7," P500.00 "),t.qZA()()())}let I=(()=>{class n{constructor(e,a,o,r,s,y,k,b){this.data=e,this.dialogRef=a,this._dialog=o,this._util=r,this._user=s,this._token=y,this._booking=k,this._auth=b,this.verifiedIdCard=!1,this.verifiedMobileNumber=!1,this.isLoading=!1,this.statusLoading=!1,this._sub=new T.w0,this._snack=(0,t.f3M)(x.ux),this.token=this._token.decodedToken()}ngOnInit(){this.isLoading=!0,this._sub.add(this._user.checkVerificationStatus(this.token.sub).subscribe({next:e=>{this.verifiedIdCard="approved"===e.status,this.isLoading=!1},error:({error:e})=>{this._snack.open(e.code,"",{duration:1e3}),this.isLoading=!1}}))}ngOnDestroy(){this._sub&&this._sub.unsubscribe()}closeDialog(e=!1){this.statusLoading||this.dialogRef.close(e)}confirmApproveModal(){this._dialog.open(N.S,{width:"100%",maxWidth:"25rem",data:{title:"Approve Booking",description:"Are you sure you want to approve this booking?",yesBtnText:"Proceed",noBtnText:"Cancel"}}).afterClosed().subscribe(({confirm:a})=>{a&&this.handleUpdateStatus("upcoming")})}confirmDeclineModal(){this._dialog.open(N.S,{width:"100%",maxWidth:"25rem",data:{title:"Decline Booking",description:"Are you sure you want to decline this booking?",yesBtnText:"Proceed",noBtnText:"Cancel"}}).afterClosed().subscribe(({confirm:a})=>{a&&this.handleUpdateStatus("declined")})}handleUpdateStatus(e){this.statusLoading=!0,this._sub.add(this._auth.csrfToken().pipe((0,p.w)(a=>this._booking.updateBookingStatus(this.data._id,e,a.token)),(0,_.K)(a=>a)).subscribe({next:a=>{this.statusLoading=!1,this._snack.open("Booking approved successfully!.","",{duration:1e3}),this.closeDialog(!0)},error:({error:a})=>{this._snack.open(a.code,"",{duration:1e3}),this.statusLoading=!1}}))}get status(){switch(this.data.status){case"for_approval":return"For Approval";case"upcoming":return"Upcoming";case"arriving":return"Arriving";case"current_guest":return"Current Guest";case"check_out":return"Check Out";case"cancelled":return"Cancelled";default:return"Booking Details"}}get imageSrc(){const e=this.data.initiatedBy?.img;return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}get propertySrc(){const e=this.data.bookTo?.cover;return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}get totalGuest(){const{adult:e,children:a,infant:o,pets:r}=this.data.details;return e+a+o+r}get intervalDays(){let e=v(this.data.duration?.start,"MM/DD/YYY");const o=v(this.data.duration?.end,"MM/DD/YYY").diff(e,"days");return`${o} day${o>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.WI),t.Y36(f.so),t.Y36(f.uw),t.Y36(D.M),t.Y36(z.K),t.Y36(A.B),t.Y36(Z.q),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-reservation-modal"]],decls:79,vars:29,consts:[[1,"reservation-modal"],[1,"close-button",3,"click"],[1,"reservation-modal-reservation-modal-container"],[1,"reservation-modal-reservation-modal-wrapper"],[1,"section-1"],[1,"profile-picture"],[1,"wrapper"],[1,"profile-picture-img"],["loading","lazy","alt","Avatar",3,"src","draggable"],[1,"profile-info"],[1,"name"],[1,"label"],[1,"duration-at-tarago"],["class","verification",4,"ngIf"],["class","verification-loading",4,"ngIf"],["class","info_action_button",4,"ngIf"],[1,"section-2"],[1,"header"],[1,"title"],[1,"content"],[1,"info-details-booked-info"],[1,"info-details-booked-guest-info"],[1,"info-details_header"],[1,"subtitle"],[1,"info-details_content"],[1,"info-details-wrapper"],[1,"info-details-label"],[4,"ngIf"],[1,"info-details-wrapper","info-details-wrapper-custom-flex"],[1,"custom-img"],[1,"info-details-label","property-name"],[1,"verification"],[1,"info_status"],[1,"info-not-verified",3,"ngStyle"],[1,"info-verified",3,"ngStyle"],[1,"info-verified-wrapper"],[1,"id_verfiy"],[1,"icons"],[1,"verification-loading"],[3,"diameter"],[1,"info_action_button"],[1,"square_button",3,"disabled","click"],[1,"info-details-label","property-earnings",2,"font-size","1rem","font-weight","bold"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),t._UZ(10,"img",8),t.qZA(),t.TgZ(11,"div",9)(12,"div",10),t._uU(13),t.qZA(),t.TgZ(14,"div",11),t._uU(15,"Booked Guest"),t.qZA(),t.TgZ(16,"div",12),t._uU(17),t.qZA()()()(),t.YNc(18,nt,21,6,"div",13),t.YNc(19,ot,4,1,"div",14),t.YNc(20,ct,7,6,"div",15),t.qZA(),t.TgZ(21,"div",16)(22,"div",17)(23,"div",18),t._uU(24),t.qZA(),t.TgZ(25,"div"),t._UZ(26,"hr"),t.qZA()(),t.TgZ(27,"div",19)(28,"div",20)(29,"div",21)(30,"div",22)(31,"div",18),t._uU(32,"Your Guest Details"),t.qZA(),t.TgZ(33,"div",23),t._uU(34,"Complete details about this booking"),t.qZA()(),t.TgZ(35,"div",24)(36,"div",25)(37,"div",26),t._uU(38,"Date booked"),t.qZA(),t.TgZ(39,"div",26)(40,"span"),t._uU(41),t.ALo(42,"date"),t.qZA()()(),t.TgZ(43,"div",25)(44,"div",26),t._uU(45,"Guest"),t.qZA(),t.TgZ(46,"div",26),t._uU(47),t.qZA()(),t.TgZ(48,"div",25)(49,"div",26),t._uU(50,"Reservation Date"),t.qZA(),t.TgZ(51,"div",26)(52,"span"),t._uU(53),t.ALo(54,"date"),t.qZA(),t._uU(55," - "),t.TgZ(56,"span"),t._uU(57),t.ALo(58,"date"),t.qZA()()(),t.TgZ(59,"div",25)(60,"div",26),t._uU(61,"Interval"),t.qZA(),t.TgZ(62,"div",26),t._uU(63),t.qZA()(),t.YNc(64,dt,16,0,"div",27),t.qZA()(),t.TgZ(65,"div"),t._UZ(66,"hr"),t.qZA(),t.TgZ(67,"div")(68,"div",18),t._uU(69,"Your Property"),t.qZA(),t.TgZ(70,"div",23),t._uU(71,"Guest want's book this property"),t.qZA(),t.TgZ(72,"div",28)(73,"div",29),t._UZ(74,"img",8),t.qZA(),t.TgZ(75,"div",30),t._uU(76),t.qZA()()(),t.YNc(77,lt,2,0,"div",27),t.YNc(78,pt,8,0,"div",27),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(10),t.Q6J("src",o.imageSrc,t.LSH)("draggable",!1),t.xp6(3),t.Oqu(null==o.data.initiatedBy?null:o.data.initiatedBy.fullName),t.xp6(4),t.hij(" ",null==o.data.initiatedBy?null:o.data.initiatedBy.contact," "),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf","For Approval"===o.status),t.xp6(4),t.Oqu(o.status),t.xp6(17),t.hij(" ",t.xi3(42,20,o.data.createdAt,"longDate"),""),t.xp6(6),t.Oqu(o.totalGuest),t.xp6(6),t.Oqu(t.xi3(54,23,null==o.data.duration?null:o.data.duration.start,"longDate")),t.xp6(4),t.Oqu(t.xi3(58,26,null==o.data.duration?null:o.data.duration.end,"longDate")),t.xp6(6),t.Oqu(o.intervalDays),t.xp6(1),t.Q6J("ngIf","check_out"===o.data.status),t.xp6(10),t.Q6J("src",o.propertySrc,t.LSH)("draggable",!1),t.xp6(2),t.hij(" ",null==o.data.bookTo?null:o.data.bookTo.name," "),t.xp6(1),t.Q6J("ngIf","check_out"===o.data.status),t.xp6(1),t.Q6J("ngIf","check_out"===o.data.status))},dependencies:[d.O5,d.PC,M.Hw,O.Ou,d.uU],styles:[".reservation-modal[_ngcontent-%COMP%]{background-color:#fff;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:Poppins-Regular;width:100%!important;height:100%!important;padding:1rem;overflow:auto}.reservation-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{padding-top:4px;position:absolute;top:10px;z-index:5}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]{width:100%!important;flex:1;display:flex;flex-direction:column;margin:auto;overflow:auto;padding-top:2rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]{width:100%;margin:0 auto;display:flex;flex-direction:row;gap:2%;flex:1;overflow:auto}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]{background-color:#f7f7f7;flex-basis:30%;height:100%;display:flex;flex-direction:column;padding:0rem 0 1rem;border-radius:10px}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]{border-bottom:1px solid rgb(223,223,223);flex-basis:50%;display:grid;place-content:center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex:none;display:flex;flex-direction:column;width:100%}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-picture-img[_ngcontent-%COMP%]{margin:1rem auto;max-width:10rem;max-height:10rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-picture-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;width:100%;height:100%;object-fit:cover;border:1px solid #68a86a}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{text-align:center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:clamp(1.2rem,1.2vw,8rem);font-weight:700;line-height:1.8rem;word-break:break-word}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#68a86a;font-size:.8rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .duration-at-tarago[_ngcontent-%COMP%]{font-size:.8rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]{flex-basis:50%;text-align:center;justify-content:center;display:flex;flex-direction:column;height:100%}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification-loading[_ngcontent-%COMP%]{min-height:5rem;height:100%;display:grid;place-items:center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification-loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.25rem;font-size:.75rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#68a86a}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-verified[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:grid;place-content:center;padding:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-verified[_ngcontent-%COMP%]   .info-verified-wrapper[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;align-items:center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-verified[_ngcontent-%COMP%]   .info-verified-wrapper[_ngcontent-%COMP%]   .id_verfiy[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.5rem;text-align:left}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-verified[_ngcontent-%COMP%]   .info-verified-wrapper[_ngcontent-%COMP%]   .id_verfiy[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{background-color:#68a86a;border-radius:100%}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-verified[_ngcontent-%COMP%]   .info-verified-wrapper[_ngcontent-%COMP%]   .id_verfiy[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;padding:0;margin:1px;width:1.5rem;height:1.2rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .info-not-verified[_ngcontent-%COMP%]{display:grid;place-content:center;flex:1;margin-top:1rem;font-size:.9rem;padding:.5rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .verification[_ngcontent-%COMP%]   .btn_view[_ngcontent-%COMP%]{flex:1;display:grid;place-content:end center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .info_action_button[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]{flex-basis:70%;height:100%;border:1px solid #e4e4e4;border-radius:10px;display:flex;flex-direction:column;gap:1rem;padding:1rem;overflow:auto}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1.5rem,1.5vw,8rem);font-weight:bolder;padding-bottom:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background-color:transparent;color:#68a86a;border:none;cursor:pointer;text-decoration:underline}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .profile-text[_ngcontent-%COMP%]{display:block}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-basis:50%;display:flex;flex-direction:column;gap:1rem;overflow-y:auto;height:100%;flex:1}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bolder;font-size:clamp(1rem,1vw,8rem)}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-wrapper-custom-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-wrapper-custom-flex[_ngcontent-%COMP%]   .custom-img[_ngcontent-%COMP%]{max-width:18rem;max-height:18rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-wrapper-custom-flex[_ngcontent-%COMP%]   .custom-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-wrapper-custom-flex[_ngcontent-%COMP%]   .property-name[_ngcontent-%COMP%]{margin:.5rem 0}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-booked-guest-info[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bolder;font-size:clamp(1rem,1vw,8rem)}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-booked-guest-info[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-booked-guest-info[_ngcontent-%COMP%]   .info-details_content[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]{color:#575757;flex-basis:20%;display:grid;grid-template-columns:50% 50%;margin-top:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-booked-guest-info[_ngcontent-%COMP%]   .info-details_content[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-details-label[_ngcontent-%COMP%]{font-weight:700}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-booked-info[_ngcontent-%COMP%]   .info-details-booked-guest-info[_ngcontent-%COMP%]   .info-details_content[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-details-content[_ngcontent-%COMP%]{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (max-width: 900px){.reservation-modal[_ngcontent-%COMP%]{padding:1.5rem 0 0}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]{border-radius:0;height:auto}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]{border-radius:0;height:auto;overflow:unset;margin-right:0;padding-right:0}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]{display:flex;gap:1rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;box-shadow:1px 1px 5px #8887;border-radius:100%;padding:.6rem .7rem}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .profile-text[_ngcontent-%COMP%]{display:none}.reservation-modal-reservation-modal-container[_ngcontent-%COMP%]   .reservation-modal-reservation-modal-wrapper[_ngcontent-%COMP%]   .section-2[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-basis:50%;display:flex;flex-direction:column;gap:1rem;overflow-y:hidden;height:100%;flex:1}}"]})}return n})();var q=g(7579),L=g(8372),B=g(4144);function mt(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Property "),t.qZA())}function gt(n,i){if(1&n&&(t.TgZ(0,"td",33)(1,"div",34),t._UZ(2,"img",35),t.TgZ(3,"div",36),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function ut(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Booked guest "),t.qZA())}function _t(n,i){if(1&n&&(t.TgZ(0,"td",38)(1,"div",39),t._UZ(2,"img",35),t.TgZ(3,"div",36),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function ht(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," No. of Guest "),t.qZA())}function ft(n,i){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setTotalGuest(e.details)," ")}}function bt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Date booked "),t.qZA())}function Ct(n,i){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortDate")," ")}}function vt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Reservation Date "),t.qZA())}function yt(n,i){if(1&n&&(t.TgZ(0,"td",33)(1,"div",40)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6,"-"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"date"),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,2,null==e.duration?null:e.duration.start,"shortDate")," "),t.xp6(5),t.hij(" ",t.xi3(9,5,null==e.duration?null:e.duration.end,"shortDate")," ")}}function wt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Interval "),t.qZA())}function xt(n,i){if(1&n&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setInterval(e.duration)," ")}}function Mt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Payment type "),t.qZA())}function Ot(n,i){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",null==e.transaction?null:e.transaction.paymentType," ")}}function Tt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Total Payout "),t.qZA())}function Pt(n,i){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,e.paidamount,"PHP","symbol")," ")}}function Zt(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Balance "),t.qZA())}function kt(n,i){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,e.balanceamount,"PHP","symbol")," ")}}function At(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Earnings "),t.qZA())}function Dt(n,i){if(1&n&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.Dn7(2,1,e.totalearnings,"PHP","symbol")," ")}}function St(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," Action "),t.qZA())}function Ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",44)(1,"div",45)(2,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.TgZ(5,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewProfile(null==r.initiatedBy?null:r.initiatedBy._id))}),t.TgZ(6,"mat-icon"),t._uU(7," person_pin"),t.qZA()(),t.TgZ(8,"button",46),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.messageGuest(r.initiatedBy))}),t.TgZ(9,"mat-icon"),t._uU(10," message"),t.qZA()()()()}}function Nt(n,i){1&n&&t._UZ(0,"tr",47)}function qt(n,i){1&n&&t._UZ(0,"tr",48)}function Bt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function Yt(n,i){1&n&&(t.TgZ(0,"span",53),t._UZ(1,"mat-spinner",54),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function It(n,i){if(1&n&&(t.TgZ(0,"tr",49)(1,"td",50),t.YNc(2,Bt,2,0,"span",51),t.YNc(3,Yt,3,1,"span",52),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const Lt=function(){return[5,10,25,100]};let Gt=(()=>{class n{constructor(e,a,o,r,s){this.dialog=e,this._util=a,this._changeDetector=o,this._booking=r,this._token=s,this.title="Check-out",this.dateToday=new Date,this.displayedColumns=["property","guestnames","numofguest","bookingdate","reservationdate","interval","paymenttype","paidamount","balanceamount","totalearnings","action"],this.dataSource=new c.by([]),this._subs=new T.w0,this._modelChanged=new q.x,this.debTime=500,this._snack=(0,t.f3M)(x.ux),this.total=0,this.isLoading=!1,this.statusLoading=!1,this.searchKey=""}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getBookingByType(this.token.sub,"check_out",a,e,this.searchKey).subscribe({next:o=>{this.dataSource=o.bookings,this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}viewDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e})}viewProfile(e){this.dialog.open(u.W,{disableClose:!0,panelClass:"custom-view-profile-dialog",data:e})}messageGuest(e){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"27rem",data:e})}openValidationModal(){this.dialog.open(R,{width:"100%",height:"100%",maxHeight:"15rem",maxWidth:"30rem",data:""})}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-checking-out"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:49,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","numofguest"],["matColumnDef","bookingdate"],["matColumnDef","reservationdate"],["matColumnDef","interval"],["mat-cell","","style","white-space: pre",4,"matCellDef"],["matColumnDef","paymenttype"],["mat-cell","","style","text-transform: capitalize",4,"matCellDef"],["matColumnDef","paidamount"],["matColumnDef","balanceamount"],["matColumnDef","totalearnings"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","width: fit-content",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],[1,"custom-checkinout"],["mat-cell","",2,"white-space","pre"],["mat-cell","",2,"text-transform","capitalize"],["mat-header-cell","",2,"white-space","pre","text-align","center"],["mat-cell","",2,"width","fit-content"],[1,"action_btn"],[3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","11",1,"mat-cell","td-no-value"],[4,"ngIf"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Check-out"),t.qZA(),t.TgZ(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(8,"mat-icon"),t._uU(9,"search"),t.qZA()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,mt,2,0,"th",10),t.YNc(14,gt,5,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,ut,2,0,"th",13),t.YNc(17,_t,5,2,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,ht,2,0,"th",13),t.YNc(20,ft,2,1,"td",11),t.BQk(),t.ynx(21,16),t.YNc(22,bt,2,0,"th",13),t.YNc(23,Ct,3,4,"td",11),t.BQk(),t.ynx(24,17),t.YNc(25,vt,2,0,"th",13),t.YNc(26,yt,10,8,"td",11),t.BQk(),t.ynx(27,18),t.YNc(28,wt,2,0,"th",13),t.YNc(29,xt,2,1,"td",19),t.BQk(),t.ynx(30,20),t.YNc(31,Mt,2,0,"th",13),t.YNc(32,Ot,2,1,"td",21),t.BQk(),t.ynx(33,22),t.YNc(34,Tt,2,0,"th",13),t.YNc(35,Pt,3,5,"td",11),t.BQk(),t.ynx(36,23),t.YNc(37,Zt,2,0,"th",13),t.YNc(38,kt,3,5,"td",11),t.BQk(),t.ynx(39,24),t.YNc(40,At,2,0,"th",13),t.YNc(41,Dt,3,5,"td",11),t.BQk(),t.ynx(42,25),t.YNc(43,St,2,0,"th",26),t.YNc(44,Ut,11,0,"td",27),t.BQk(),t.YNc(45,Nt,1,0,"tr",28),t.YNc(46,qt,1,0,"tr",29),t.YNc(47,It,4,2,"tr",30),t.qZA(),t.TgZ(48,"mat-paginator",31),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(7),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.total)("pageSizeOptions",t.DdM(7,Lt)))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,m.Fj,m.JJ,m.On,O.Ou,d.H9,d.uU],styles:[".today-tabs-today-tabs-wrapper .content{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper .content .title{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper .content .search{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper .content .search input{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper .content .search mat-icon{color:#63ab68}.today-tabs-today-tabs-wrapper .content .table-container{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper .content .table-container tr td.td-no-value{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .name{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .name{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-checkinout{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper .content .action_btn{width:-moz-fit-content;width:fit-content;margin-right:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper .content .action_btn button{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn button mat-icon{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper .content .no-checking{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper .content .title{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper .content .search{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{display:block}}\n"],encapsulation:2,data:{animation:[w.B]}})}return n})();var V=g(4859);function Jt(n,i){1&n&&(t.TgZ(0,"span"),t._UZ(1,"mat-spinner",18),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",20))}function Qt(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}let Ht=(()=>{class n{constructor(e,a,o,r,s){this.dialogRef=e,this.fb=a,this.data=o,this._booking=r,this._auth=s,this.date="",this.time="",this.timeValue="",this.nameErrors=[{field:"name",error:"required",message:"Name is required."},{field:"name",error:"maxlength",message:"Name must consist of 100 characters only."}],this.dateErrors=[{field:"date",error:"required",message:"Date is required."},{field:"date",error:"maxlength",message:"Date must consist of 100 characters only."}],this.timeErrors=[{field:"time",error:"required",message:"Time is required."},{field:"time",error:"maxlength",message:"Time must consist of 100 characters only."}],this.isLoading=!1,this._snack=(0,t.f3M)(x.ux),this._sub=new T.w0}ngOnInit(){this.createForm=this.fb.group({name:new m.NI("",{validators:[m.kI.required,m.kI.maxLength(100)]}),date:new m.NI("",{validators:[m.kI.required,m.kI.maxLength(100)]}),time:new m.NI("",{validators:[m.kI.required,m.kI.maxLength(100)]})})}ngOnDestroy(){this._sub&&this._sub.unsubscribe()}getCurrentTime(){const e=v().format("HH:mm").toString();this.time=v(e,"HH:mm").format("hh:mm A"),this.timeValue=e}getCurrentDate(){const e=v().format("MM/DD/YYYY").toString();this.date=e}onSubmit(e){if(!e.valid)return void this.createForm.markAllAsTouched();const a=e.getRawValue(),{bookingId:o}=this.data,r={name:a.name,checkInDate:a.date,checkInTime:this.timeValue};this.isLoading=!0,this._sub.add(this._auth.csrfToken().pipe((0,p.w)(s=>this._booking.addGuest(o,r,s.token)),(0,_.K)(s=>s)).subscribe({next:s=>{s.success&&(this._snack.open("Guest successfully added.","",{duration:1e3}),this.isLoading=!1,this.closeDialog(s.success))},error:({error:s})=>{this._snack.open(s.code,"",{duration:1e3}),this.isLoading=!1}}))}closeDialog(e=!1){this.isLoading||this.dialogRef.close(e)}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.so),t.Y36(m.qu),t.Y36(f.WI),t.Y36(Z.q),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-guest"]],decls:40,vars:16,consts:[[1,"more-info"],[1,"header"],[1,"title"],[1,"close-button-normal",3,"click"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"input-wrapper"],[1,"label"],["formControlName","name","type","text","name","name",3,"disabled"],[3,"form","errors"],[1,"input-wrapper-time"],["formControlName","date","type","text","name","checkIn","readonly","",3,"ngModel","ngModelChange"],["type","button","mat-raised-button","",3,"disabled","click"],["formControlName","time","type","text","name","checkIn","readonly","",3,"ngModel","ngModelChange"],[1,"footer"],["type","submit",1,"main-button","custom_btn",3,"disabled"],[4,"ngIf"],["type","button",1,"main-button",3,"disabled","click"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Add Guest"),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t._UZ(7,"hr"),t.TgZ(8,"form",4),t.NdJ("ngSubmit",function(){return o.onSubmit(o.createForm)}),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7),t._uU(12,"Name"),t.qZA(),t._UZ(13,"input",8)(14,"app-input-error-message",9),t.qZA(),t.TgZ(15,"div",6)(16,"div",7),t._uU(17,"Check In Date ( MM/DD/YYYY )"),t.qZA(),t.TgZ(18,"div",10)(19,"input",11),t.NdJ("ngModelChange",function(s){return o.date=s}),t.qZA(),t.TgZ(20,"button",12),t.NdJ("click",function(){return o.getCurrentDate()}),t.TgZ(21,"mat-icon"),t._uU(22,"calendar_month"),t.qZA()()(),t._UZ(23,"app-input-error-message",9),t.qZA(),t.TgZ(24,"div",6)(25,"div",7),t._uU(26,"Check In Time"),t.qZA(),t.TgZ(27,"div",10)(28,"input",13),t.NdJ("ngModelChange",function(s){return o.time=s}),t.qZA(),t.TgZ(29,"button",12),t.NdJ("click",function(){return o.getCurrentTime()}),t.TgZ(30,"mat-icon"),t._uU(31,"access_time"),t.qZA()()(),t._UZ(32,"app-input-error-message",9),t.qZA()(),t._UZ(33,"hr"),t.TgZ(34,"div",14)(35,"button",15),t.YNc(36,Jt,2,1,"span",16),t.YNc(37,Qt,2,0,"span",16),t.qZA(),t.TgZ(38,"button",17),t.NdJ("click",function(){return o.closeDialog()}),t._uU(39," Cancel "),t.qZA()()()()),2&a&&(t.xp6(8),t.Q6J("formGroup",o.createForm),t.xp6(5),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("form",o.createForm)("errors",o.nameErrors),t.xp6(5),t.Q6J("ngModel",o.date),t.xp6(1),t.Q6J("disabled",o.isLoading),t.xp6(3),t.Q6J("form",o.createForm)("errors",o.dateErrors),t.xp6(5),t.Q6J("ngModel",o.time),t.xp6(1),t.Q6J("disabled",o.isLoading),t.xp6(3),t.Q6J("form",o.createForm)("errors",o.timeErrors),t.xp6(3),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("disabled",o.isLoading))},dependencies:[d.O5,M.Hw,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,O.Ou,V.lW,j.T],styles:[".more-info[_ngcontent-%COMP%]{font-family:Poppins-Regular!important;background-color:#fff;border-top-right-radius:5px;border-top-left-radius:5px;display:flex;flex-direction:column;height:100%;overflow:auto}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex:0;display:flex;width:100%;align-items:center;justify-content:center;padding:.5rem 1rem;justify-content:space-between}.more-info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:.5rem 0;flex:1;height:100%;text-align:center}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:100%;text-align:start;padding:0 1rem 1rem}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:.3rem}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem;border:2px solid #63ab68;width:100%;border-radius:10px;font-family:Poppins-Medium;font-size:15px}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper-time[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper-time[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:5rem;height:3.5rem;background-color:#63ab68;transform:translateY(-.1rem)}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input-wrapper-time[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(1.5);color:#f5f5f5;margin-bottom:.25rem}.more-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1rem,1.1vw,4rem);line-height:2rem;padding:.7rem}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:1rem 0;flex:0;display:flex;justify-content:center;gap:1rem}.more-info[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .custom_btn[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #68a968;color:#68a968}"]})}return n})();function Rt(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(5,3,e.checkInDate,"shortDate")),t.xp6(3),t.Oqu(e.checkInTime)}}function Ft(n,i){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,Rt,8,6,"tr",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.guests)}}function $t(n,i){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",11),t._uU(3,"No Guest Found"),t.qZA()()())}function zt(n,i){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",11)(3,"div",12)(4,"span",13),t._UZ(5,"mat-spinner",14),t._uU(6," Loading..."),t.qZA()()()()()),2&n&&(t.xp6(5),t.Q6J("diameter",15))}let jt=(()=>{class n{constructor(e,a,o,r){this.data=e,this.dialogRef=a,this._dialog=o,this._booking=r,this._subs=new T.w0,this._snack=(0,t.f3M)(x.ux),this.guests=[],this.isLoading=!1}ngOnInit(){this.handleGetGuests()}ngOnDestroy(){this._subs&&this._subs.unsubscribe()}handleGetGuests(){this.isLoading=!0,this._subs.add(this._booking.getBookingGuests(this.data).subscribe({next:e=>{this.guests=e,this.isLoading=!1},error:({error:e})=>{this._snack.open(e.code,"",{duration:1e3}),this.isLoading=!1}}))}closeDialog(){this.isLoading||this.dialogRef.close()}addGuestModal(){this._dialog.open(Ht,{disableClose:!0,width:"100%",maxWidth:"35rem",data:{bookingId:this.data}}).afterClosed().subscribe(a=>{a&&this.handleGetGuests()})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.WI),t.Y36(f.so),t.Y36(f.uw),t.Y36(Z.q))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-guest-list-modal"]],decls:26,vars:3,consts:[[1,"guest_container"],[1,"close-button",3,"click"],[1,"info-details_header"],[1,"title"],[1,"subtitle"],[2,"text-align","end","margin","0 1.3rem",3,"click"],["mat-raised-button",""],[1,"table-container"],[1,"airbnb-table"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],[2,"display","grid","place-items","center"],[2,"display","flex","align-items","center","gap","0.25rem"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div")(2,"button",1),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()()(),t.TgZ(5,"div",2)(6,"div",3),t._uU(7,"All Guest Members"),t.qZA(),t.TgZ(8,"div",4),t._uU(9," Manage and review the details of all guests in this listing. "),t.qZA()(),t.TgZ(10,"div",5),t.NdJ("click",function(){return o.addGuestModal()}),t.TgZ(11,"button",6),t._uU(12,"Add Guest"),t.qZA()(),t.TgZ(13,"div",7)(14,"table",8)(15,"thead")(16,"tr")(17,"th"),t._uU(18,"Guest Name"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Check-In Date"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Check-In Time"),t.qZA()()(),t.YNc(23,Ft,2,1,"tbody",9),t.YNc(24,$t,4,0,"tbody",9),t.YNc(25,zt,7,1,"tbody",9),t.qZA()()()),2&a&&(t.xp6(23),t.Q6J("ngIf",!o.isLoading&&o.guests.length>0),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&o.guests.length<1),t.xp6(1),t.Q6J("ngIf",o.isLoading))},dependencies:[d.sg,d.O5,M.Hw,O.Ou,V.lW,d.uU],styles:[".guest_container[_ngcontent-%COMP%]{font-family:Poppins-Regular;overflow:auto;display:flex;flex-direction:column;height:100%}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]{padding:1rem 1rem 0rem}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bolder;font-size:clamp(1rem,1vw,8rem)}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:clamp(1rem,.8vw,4rem)}.guest_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin:24px;flex:1;height:100%;overflow-x:auto;overflow-y:auto;background-color:#fff;box-shadow:0 2px 4px #0000001a}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;color:#484848}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f7f7f7}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:20rem;min-width:8rem}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;color:#767676;border-bottom:2px solid #e0e0e0;white-space:pre}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;border-bottom:1px solid #e0e0e0;white-space:pre}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;transition:background-color .3s ease}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}@media (max-width: 768px){.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;font-size:14px}}"]})}return n})();var Q=g(2843);function Et(n,i){1&n&&(t.TgZ(0,"th",27),t._uU(1," Property "),t.qZA())}function Vt(n,i){if(1&n&&(t.TgZ(0,"td",28)(1,"div",29),t._UZ(2,"img",30),t.TgZ(3,"div",31),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function Kt(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Booked guest "),t.qZA())}function Wt(n,i){if(1&n&&(t.TgZ(0,"td",33)(1,"div",34),t._UZ(2,"img",30),t.TgZ(3,"div",31),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function Xt(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," No. of Guest "),t.qZA())}function te(n,i){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setTotalGuest(e.details)," ")}}function ee(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Date booked "),t.qZA())}function ne(n,i){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortDate")," ")}}function oe(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Reservation Date "),t.qZA())}function ae(n,i){if(1&n&&(t.TgZ(0,"td",28)(1,"div",35)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6,"-"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"date"),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,2,null==e.duration?null:e.duration.start,"shortDate")," "),t.xp6(5),t.hij(" ",t.xi3(9,5,null==e.duration?null:e.duration.end,"shortDate")," ")}}function ie(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Interval "),t.qZA())}function re(n,i){if(1&n&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setInterval(e.duration)," ")}}function se(n,i){1&n&&(t.TgZ(0,"th",37),t._uU(1," Action "),t.qZA())}function ce(n,i){1&n&&t._UZ(0,"mat-spinner",44),2&n&&t.Q6J("diameter",20)}function de(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"fact_check"),t.qZA())}function le(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"div",39)(2,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.TgZ(5,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.guestListGuest(r))}),t.TgZ(6,"mat-icon"),t._uU(7,"assignment_ind"),t.qZA()(),t.TgZ(8,"button",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.messageGuest(r.initiatedBy))}),t.TgZ(9,"mat-icon"),t._uU(10," message"),t.qZA()(),t.TgZ(11,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.checkInModal(r))}),t.YNc(12,ce,1,1,"mat-spinner",42),t.YNc(13,de,2,0,"mat-icon",43),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(11),t.Q6J("disabled",e.statusLoading),t.xp6(1),t.Q6J("ngIf",e.statusLoading),t.xp6(1),t.Q6J("ngIf",!e.statusLoading)}}function pe(n,i){1&n&&t._UZ(0,"tr",45)}function me(n,i){1&n&&t._UZ(0,"tr",46)}function ge(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function ue(n,i){1&n&&(t.TgZ(0,"span",50),t._UZ(1,"mat-spinner",44),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function _e(n,i){if(1&n&&(t.TgZ(0,"tr",47)(1,"td",48),t.YNc(2,ge,2,0,"span",43),t.YNc(3,ue,3,1,"span",49),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const he=function(){return[5,10,25,100]};let fe=(()=>{class n{constructor(e,a,o,r,s,y){this.dialog=e,this._util=a,this._changeDetector=o,this._booking=r,this._token=s,this._auth=y,this.status="Current guest",this.dateToday=new Date,this.displayedColumns=["property","guestnames","numofguest","bookingdate","reservationdate","interval","action"],this.dataSource=new c.by([]),this._subs=new T.w0,this._modelChanged=new q.x,this.debTime=500,this._snack=(0,t.f3M)(x.ux),this.total=0,this.isLoading=!1,this.statusLoading=!1,this.searchKey=""}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getBookingByType(this.token.sub,"arriving",a,e,this.searchKey).subscribe({next:o=>{this.dataSource=o.bookings,this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}viewDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e})}viewProfile(){this.dialog.open(u.W,{width:"99vw",maxWidth:"80rem",height:"99vh",maxHeight:"50rem",data:""})}messageGuest(e){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"27rem",data:e})}guestListGuest(e){this.dialog.open(jt,{width:"99vw",maxWidth:"60rem",height:"auto",maxHeight:"50rem",data:e._id})}checkInModal(e){this.dialog.open(N.S,{width:"100%",maxWidth:"30rem",data:{title:"Guest Check In",description:`Do you want to confirm this guest check-in?\n        Guest: ${e.initiatedBy?.fullName}\n        Property: ${e.bookTo?.name}`,yesBtnText:"Yes",noBtnText:"No"}}).afterClosed().subscribe(({confirm:o})=>{o&&(this.statusLoading=!0,this._subs.add(this._auth.csrfToken().pipe((0,p.w)(r=>this._booking.bookingCheckIn(e._id,r.token)),(0,_.K)(r=>(0,Q._)(()=>r))).subscribe({next:r=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.statusLoading=!1,this._snack.open("Checked-in successfully!","",{duration:1e3})},error:({error:r})=>{this._snack.open(r.msg||r.code||"Failed to complete the check-in process.","Ok"),this.statusLoading=!1}})))})}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-arriving-soon"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:37,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","numofguest"],["matColumnDef","bookingdate"],["matColumnDef","reservationdate"],["matColumnDef","interval"],["mat-cell","","style","white-space: pre",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","width: fit-content",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],[1,"custom-checkinout"],["mat-cell","",2,"white-space","pre"],["mat-header-cell","",2,"white-space","pre","text-align","center"],["mat-cell","",2,"width","fit-content"],[1,"action_btn"],[3,"click"],[3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"diameter"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","td-no-value"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Arriving"),t.qZA(),t.TgZ(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(8,"mat-icon"),t._uU(9,"search"),t.qZA()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,Et,2,0,"th",10),t.YNc(14,Vt,5,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,Kt,2,0,"th",13),t.YNc(17,Wt,5,2,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,Xt,2,0,"th",13),t.YNc(20,te,2,1,"td",11),t.BQk(),t.ynx(21,16),t.YNc(22,ee,2,0,"th",13),t.YNc(23,ne,3,4,"td",11),t.BQk(),t.ynx(24,17),t.YNc(25,oe,2,0,"th",13),t.YNc(26,ae,10,8,"td",11),t.BQk(),t.ynx(27,18),t.YNc(28,ie,2,0,"th",13),t.YNc(29,re,2,1,"td",19),t.BQk(),t.ynx(30,20),t.YNc(31,se,2,0,"th",21),t.YNc(32,le,14,3,"td",22),t.BQk(),t.YNc(33,pe,1,0,"tr",23),t.YNc(34,me,1,0,"tr",24),t.YNc(35,_e,4,2,"tr",25),t.qZA(),t.TgZ(36,"mat-paginator",26),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(7),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.total)("pageSizeOptions",t.DdM(7,he)))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,m.Fj,m.JJ,m.On,O.Ou,d.uU],styles:[".today-tabs-today-tabs-wrapper .content{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper .content .title{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper .content .search{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper .content .search input{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper .content .search mat-icon{color:#63ab68}.today-tabs-today-tabs-wrapper .content .table-container{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper .content .table-container tr td.td-no-value{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .name{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .name{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-checkinout{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper .content .action_btn{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper .content .action_btn button{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn button mat-icon{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper .content .no-checking{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper .content .title{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper .content .search{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{display:block}}\n"],encapsulation:2,data:{animation:[w.B]}})}return n})();function be(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Property "),t.qZA())}function Ce(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",28),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function ve(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Booked guest "),t.qZA())}function ye(n,i){if(1&n&&(t.TgZ(0,"td",32)(1,"div",33),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function we(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," No. of Guest "),t.qZA())}function xe(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setTotalGuest(e.details)," ")}}function Me(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Date booked "),t.qZA())}function Oe(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortDate")," ")}}function Te(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Reservation Date "),t.qZA())}function Pe(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",34)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6,"-"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"date"),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,2,null==e.duration?null:e.duration.start,"shortDate")," "),t.xp6(5),t.hij(" ",t.xi3(9,5,null==e.duration?null:e.duration.end,"shortDate")," ")}}function Ze(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Interval "),t.qZA())}function ke(n,i){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setInterval(e.duration)," ")}}function Ae(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Action "),t.qZA())}function De(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t.TgZ(2,"button")(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()()()()}}function Se(n,i){1&n&&t._UZ(0,"tr",38)}function Ue(n,i){1&n&&t._UZ(0,"tr",39)}function Ne(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function qe(n,i){1&n&&(t.TgZ(0,"span",44),t._UZ(1,"mat-spinner",45),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function Be(n,i){if(1&n&&(t.TgZ(0,"tr",40)(1,"td",41),t.YNc(2,Ne,2,0,"span",42),t.YNc(3,qe,3,1,"span",43),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const Ye=function(){return[5,10,25,100]};let Ie=(()=>{class n{constructor(e,a,o,r,s){this.dialog=e,this._util=a,this._changeDetector=o,this._booking=r,this._token=s,this.status="Upcoming",this.dateToday=new Date,this.displayedColumns=["property","guestnames","numofguest","bookingdate","reservationdate","interval","action"],this.dataSource=new c.by([]),this._subs=new T.w0,this._modelChanged=new q.x,this.debTime=500,this._snack=(0,t.f3M)(x.ux),this.total=0,this.isLoading=!1,this.searchKey=""}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getBookingByType(this.token.sub,"upcoming",a,e,this.searchKey).subscribe({next:o=>{this.dataSource=o.bookings,this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}viewDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e})}viewProfile(){this.dialog.open(u.W,{width:"99vw",maxWidth:"80rem",height:"99vh",maxHeight:"50rem",data:""})}messageGuest(){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"24rem",data:""})}openValidationModal(){this.dialog.open(R,{width:"100%",height:"100%",maxHeight:"15rem",maxWidth:"30rem",data:""})}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-upcoming"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:37,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","numofguest"],["matColumnDef","bookingdate"],["matColumnDef","reservationdate"],["matColumnDef","interval"],["mat-cell","","style","white-space: pre",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions","length","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],[1,"custom-checkinout"],["mat-cell","",2,"white-space","pre"],["mat-header-cell","",2,"white-space","pre","text-align","center"],[1,"action_btn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","td-no-value"],[4,"ngIf"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Upcoming"),t.qZA(),t.TgZ(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(8,"mat-icon"),t._uU(9,"search"),t.qZA()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,be,2,0,"th",10),t.YNc(14,Ce,5,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,ve,2,0,"th",13),t.YNc(17,ye,5,2,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,we,2,0,"th",13),t.YNc(20,xe,2,1,"td",11),t.BQk(),t.ynx(21,16),t.YNc(22,Me,2,0,"th",13),t.YNc(23,Oe,3,4,"td",11),t.BQk(),t.ynx(24,17),t.YNc(25,Te,2,0,"th",13),t.YNc(26,Pe,10,8,"td",11),t.BQk(),t.ynx(27,18),t.YNc(28,Ze,2,0,"th",13),t.YNc(29,ke,2,1,"td",19),t.BQk(),t.ynx(30,20),t.YNc(31,Ae,2,0,"th",21),t.YNc(32,De,5,0,"td",11),t.BQk(),t.YNc(33,Se,1,0,"tr",22),t.YNc(34,Ue,1,0,"tr",23),t.YNc(35,Be,4,2,"tr",24),t.qZA(),t.TgZ(36,"mat-paginator",25),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(7),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,Ye))("length",o.total))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,m.Fj,m.JJ,m.On,O.Ou,d.uU],styles:[".today-tabs-today-tabs-wrapper .content{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper .content .title{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper .content .search{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper .content .search input{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper .content .search mat-icon{color:#63ab68}.today-tabs-today-tabs-wrapper .content .table-container{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper .content .table-container tr td.td-no-value{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .name{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .name{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-checkinout{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper .content .action_btn{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper .content .action_btn button{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn button mat-icon{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper .content .no-checking{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper .content .title{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper .content .search{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{display:block}}\n"],encapsulation:2,data:{animation:[w.B]}})}return n})();function Le(n,i){1&n&&t._UZ(0,"mat-spinner",14),2&n&&t.Q6J("diameter",20)}function Ge(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"outbox"),t.qZA())}function Je(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.checkOutGuest(o._id,o.name))}),t.YNc(1,Le,1,1,"mat-spinner",13),t.YNc(2,Ge,2,0,"mat-icon",7),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("disabled",e.outLoading),t.xp6(1),t.Q6J("ngIf",e.outLoading),t.xp6(1),t.Q6J("ngIf",!e.outLoading)}}function Qe(n,i){1&n&&(t.TgZ(0,"div",15),t._uU(1," Checked Out "),t.qZA())}function He(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",9),t.YNc(15,Je,3,3,"button",10),t.YNc(16,Qe,2,0,"div",11),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw(2);t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(5,7,e.checkInDate,"shortDate")),t.xp6(3),t.Oqu(a.formatTime(e.checkInTime)),t.xp6(2),t.Oqu(t.xi3(10,10,e.checkOutDate,"shortDate")),t.xp6(3),t.hij(" ",e.checkOutTime?a.formatTime(e.checkOutTime):""," "),t.xp6(3),t.Q6J("ngIf",!e.checkOutDate&&!e.checkOutTime),t.xp6(1),t.Q6J("ngIf",e.checkOutDate&&e.checkOutTime)}}function Re(n,i){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,He,17,13,"tr",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.guests)}}function Fe(n,i){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",16),t._uU(3,"No Guest Found"),t.qZA()()())}function $e(n,i){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",16)(3,"div",17)(4,"span",18),t._UZ(5,"mat-spinner",14),t._uU(6," Loading..."),t.qZA()()()()()),2&n&&(t.xp6(5),t.Q6J("diameter",15))}let ze=(()=>{class n{constructor(e,a,o,r,s){this.data=e,this.dialogRef=a,this._booking=o,this._dialog=r,this._auth=s,this._subs=new T.w0,this._snack=(0,t.f3M)(x.ux),this.isLoading=!1,this.outLoading=!1,this.guests=[]}ngOnInit(){this.handleGetGuests()}ngOnDestroy(){this._subs&&this._subs.unsubscribe()}closeDialog(){this.outLoading||this.dialogRef.close()}handleGetGuests(){this.isLoading=!0,this._subs.add(this._booking.getBookingGuests(this.data).subscribe({next:e=>{this.guests=e,this.isLoading=!1},error:({error:e})=>{this._snack.open(e.code,"",{duration:1e3}),this.isLoading=!1}}))}checkOutGuest(e,a){this._dialog.open(N.S,{width:"100%",maxWidth:"25rem",data:{title:"Check-Out Guest",description:`Are you sure you want to check-out ${a}?`,yesBtnText:"Proceed",noBtnText:"Cancel"}}).afterClosed().subscribe(({confirm:r})=>{if(r){this.outLoading=!0;const s=v().format("HH:mm").toString(),k={checkOutDate:v().format("MM/DD/YYYY").toString(),checkOutTime:s};this._subs.add(this._auth.csrfToken().pipe((0,p.w)(b=>this._booking.checkOutGuest(e,k,b.token)),(0,_.K)(b=>b)).subscribe({next:b=>{this.outLoading=!1,this.handleGetGuests()},error:({error:b})=>{this._snack.open(b.code,"",{duration:1e3}),this.outLoading=!1}}))}})}formatTime(e){return v(e,"HH:mm").format("hh:mm A")}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.WI),t.Y36(f.so),t.Y36(Z.q),t.Y36(f.uw),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-guest-checkout-modal"]],decls:29,vars:3,consts:[[1,"guest_container"],[1,"close-button",3,"click"],[1,"info-details_header"],[1,"title"],[1,"subtitle"],[1,"table-container"],[1,"airbnb-table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"action_btn"],[3,"disabled","click",4,"ngIf"],["class","badge",4,"ngIf"],[3,"disabled","click"],[3,"diameter",4,"ngIf"],[3,"diameter"],[1,"badge"],["colspan","5"],[2,"display","grid","place-items","center"],[2,"display","flex","align-items","center","gap","0.25rem"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div")(2,"button",1),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()()(),t.TgZ(5,"div",2)(6,"div",3),t._uU(7,"Check Out Guest Members"),t.qZA(),t.TgZ(8,"div",4),t._uU(9," Manage and review the details of guests who have checked out. "),t.qZA()(),t.TgZ(10,"div",5)(11,"table",6)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"Guest Name"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Check-In Date"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Check-In Time"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Check-Out Date"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Check-Out Time"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Action"),t.qZA()()(),t.YNc(26,Re,2,1,"tbody",7),t.YNc(27,Fe,4,0,"tbody",7),t.YNc(28,$e,7,1,"tbody",7),t.qZA()()()),2&a&&(t.xp6(26),t.Q6J("ngIf",!o.isLoading&&o.guests.length>0),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&o.guests.length<1),t.xp6(1),t.Q6J("ngIf",o.isLoading))},dependencies:[d.sg,d.O5,M.Hw,O.Ou,d.uU],styles:[".guest_container[_ngcontent-%COMP%]{font-family:Poppins-Regular;overflow:auto;display:flex;flex-direction:column;height:100%}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]{padding:1rem 1rem 0rem}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bolder;font-size:clamp(1rem,1vw,8rem)}.guest_container[_ngcontent-%COMP%]   .info-details_header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:clamp(1rem,.8vw,4rem)}.guest_container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin:24px;flex:1;height:100%;overflow-x:auto;overflow-y:auto;background-color:#fff;box-shadow:0 2px 4px #0000001a}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;color:#484848}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f7f7f7}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:20rem;min-width:8rem}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;color:#767676;border-bottom:2px solid #e0e0e0;white-space:pre}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;border-bottom:1px solid #e0e0e0;white-space:pre}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;transition:background-color .3s ease}.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.guest_container[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.guest_container[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:.1rem .5rem;background-color:#000;font-size:.6rem;font-weight:700;letter-spacing:.1rem;color:#f7f7f7;border-radius:3px}.guest_container[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.guest_container[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;display:grid;place-content:center;font-size:20px}@media (max-width: 768px){.guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .guest_container[_ngcontent-%COMP%]   .airbnb-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;font-size:14px}}"]})}return n})();function je(n,i){1&n&&(t.TgZ(0,"th",27),t._uU(1," Property "),t.qZA())}function Ee(n,i){if(1&n&&(t.TgZ(0,"td",28)(1,"div",29),t._UZ(2,"img",30),t.TgZ(3,"div",31),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function Ve(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Booked guest "),t.qZA())}function Ke(n,i){if(1&n&&(t.TgZ(0,"td",33)(1,"div",34),t._UZ(2,"img",30),t.TgZ(3,"div",31),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function We(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Guest List "),t.qZA())}function Xe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",35)(1,"span",36),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewGuestCheckout(r._id))}),t._uU(2,"Check Out Guest"),t.qZA()()}}function tn(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Date booked "),t.qZA())}function en(n,i){if(1&n&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortDate")," ")}}function nn(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Reservation Date "),t.qZA())}function on(n,i){if(1&n&&(t.TgZ(0,"td",28)(1,"div",37)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6,"-"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"date"),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,2,null==e.duration?null:e.duration.start,"shortDate")," "),t.xp6(5),t.hij(" ",t.xi3(9,5,null==e.duration?null:e.duration.end,"shortDate")," ")}}function an(n,i){1&n&&(t.TgZ(0,"th",32),t._uU(1," Interval "),t.qZA())}function rn(n,i){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setInterval(e.duration)," ")}}function sn(n,i){1&n&&(t.TgZ(0,"th",39),t._uU(1," Action "),t.qZA())}function cn(n,i){1&n&&t._UZ(0,"mat-spinner",45),2&n&&t.Q6J("diameter",20)}function dn(n,i){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"outbox"),t.qZA())}function ln(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",28)(1,"div",40)(2,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t.TgZ(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()(),t.TgZ(5,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewProfile(null==r.initiatedBy?null:r.initiatedBy._id))}),t.TgZ(6,"mat-icon"),t._uU(7," person_pin"),t.qZA()(),t.TgZ(8,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.messageGuest(r.initiatedBy))}),t.TgZ(9,"mat-icon"),t._uU(10," message"),t.qZA()(),t.TgZ(11,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.checkOutBooking(r))}),t.YNc(12,cn,1,1,"mat-spinner",43),t.YNc(13,dn,2,0,"mat-icon",44),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(11),t.Q6J("disabled",e.statusLoading),t.xp6(1),t.Q6J("ngIf",e.statusLoading),t.xp6(1),t.Q6J("ngIf",!e.statusLoading)}}function pn(n,i){1&n&&t._UZ(0,"tr",46)}function mn(n,i){1&n&&t._UZ(0,"tr",47)}function gn(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function un(n,i){1&n&&(t.TgZ(0,"span",51),t._UZ(1,"mat-spinner",45),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function _n(n,i){if(1&n&&(t.TgZ(0,"tr",48)(1,"td",49),t.YNc(2,gn,2,0,"span",44),t.YNc(3,un,3,1,"span",50),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const hn=function(){return[5,10,25,100]};let fn=(()=>{class n{constructor(e,a,o,r,s,y){this.dialog=e,this._util=a,this._changeDetector=o,this._booking=r,this._token=s,this._auth=y,this.title="Current guest",this.dateToday=new Date,this.displayedColumns=["property","guestnames","numofguest","bookingdate","reservationdate","interval","action"],this.dataSource=new c.by([]),this._subs=new T.w0,this._modelChanged=new q.x,this.debTime=500,this._snack=(0,t.f3M)(x.ux),this.total=0,this.isLoading=!1,this.statusLoading=!1,this.searchKey=""}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getBookingByType(this.token.sub,"current_guest",a,e,this.searchKey).subscribe({next:o=>{this.dataSource=o.bookings,this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}viewDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e})}viewProfile(e){this.dialog.open(u.W,{disableClose:!0,panelClass:"custom-view-profile-dialog",data:e})}messageGuest(e){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"27rem",data:e})}viewGuestCheckout(e){this.dialog.open(ze,{width:"99vw",maxWidth:"60rem",height:"auto",maxHeight:"50rem",data:e})}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}checkOutBooking(e){this.dialog.open(N.S,{width:"100%",maxWidth:"30rem",data:{title:"Guest Check Out",description:`Do you want to confirm this guest check-out?\n        Guest: ${e.initiatedBy?.fullName}\n        Property: ${e.bookTo?.name}`,yesBtnText:"Yes",noBtnText:"No"}}).afterClosed().subscribe(({confirm:o})=>{o&&(this.statusLoading=!0,this._subs.add(this._auth.csrfToken().pipe((0,p.w)(r=>this._booking.bookingCheckOut(e._id,r.token)),(0,_.K)(r=>(0,Q._)(()=>r))).subscribe({next:r=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.statusLoading=!1,this._snack.open("Checked-out successfully!","",{duration:1e3})},error:({error:r})=>{this._snack.open(r.msg||r.code||"Failed to complete the check-out process.","Ok"),this.statusLoading=!1}})))})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-currently-guest"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:37,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","numofguest"],["mat-cell","","class","numberofguest",4,"matCellDef"],["matColumnDef","bookingdate"],["matColumnDef","reservationdate"],["matColumnDef","interval"],["mat-cell","","style","white-space: pre",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],["mat-cell","",1,"numberofguest"],[1,"custom_guest_btn",3,"click"],[1,"custom-checkinout"],["mat-cell","",2,"white-space","pre"],["mat-header-cell","",2,"white-space","pre","text-align","center"],[1,"action_btn"],[3,"click"],[3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"diameter"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","td-no-value"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Current guest"),t.qZA(),t.TgZ(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(8,"mat-icon"),t._uU(9,"search"),t.qZA()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,je,2,0,"th",10),t.YNc(14,Ee,5,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,Ve,2,0,"th",13),t.YNc(17,Ke,5,2,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,We,2,0,"th",13),t.YNc(20,Xe,3,0,"td",16),t.BQk(),t.ynx(21,17),t.YNc(22,tn,2,0,"th",13),t.YNc(23,en,3,4,"td",11),t.BQk(),t.ynx(24,18),t.YNc(25,nn,2,0,"th",13),t.YNc(26,on,10,8,"td",11),t.BQk(),t.ynx(27,19),t.YNc(28,an,2,0,"th",13),t.YNc(29,rn,2,1,"td",20),t.BQk(),t.ynx(30,21),t.YNc(31,sn,2,0,"th",22),t.YNc(32,ln,14,3,"td",11),t.BQk(),t.YNc(33,pn,1,0,"tr",23),t.YNc(34,mn,1,0,"tr",24),t.YNc(35,_n,4,2,"tr",25),t.qZA(),t.TgZ(36,"mat-paginator",26),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(7),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.total)("pageSizeOptions",t.DdM(7,hn)))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,m.Fj,m.JJ,m.On,O.Ou,d.uU],styles:[".today-tabs-today-tabs-wrapper .content{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper .content .title{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper .content .search{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper .content .search input{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper .content .search mat-icon{color:#63ab68}.today-tabs-today-tabs-wrapper .content .table-container{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper .content .table-container tr td.td-no-value{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .name{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .name{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-checkinout{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom_guest_btn{background-color:#000;color:#fff;padding:.3rem .5rem;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper .content .action_btn button{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn button mat-icon{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper .content .no-checking{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper .content .title{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper .content .search{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{display:block}}\n"],encapsulation:2,data:{animation:[w.B]}})}return n})();var H=g(8255);function bn(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Property "),t.qZA())}function Cn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",28),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function vn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Booked guest "),t.qZA())}function yn(n,i){if(1&n&&(t.TgZ(0,"td",32)(1,"div",33),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function wn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Cancellation Status "),t.qZA())}function xn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",34),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.hij(" ",null==e.cancel?null:e.cancel.status," ")}}function Mn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Reasons "),t.qZA())}function On(n,i){if(1&n&&(t.TgZ(0,"td",35)(1,"div",30),t._uU(2),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(null==e.cancel?null:e.cancel.reason)}}function Tn(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Action "),t.qZA())}function Pn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",37)(1,"div",38)(2,"button",39)(3,"mat-icon"),t._uU(4,"more_horiz"),t.qZA()()(),t.TgZ(5,"mat-menu",null,40)(7,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewDetails(r))}),t._uU(8," View Details "),t.qZA(),t.TgZ(9,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.approveCancellation(r))}),t._uU(10),t.qZA(),t.TgZ(11,"button",42),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.denyCancellation(r))}),t._uU(12),t.qZA(),t.TgZ(13,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewProfile(null==r.initiatedBy?null:r.initiatedBy._id))}),t._uU(14," View Guest Profile "),t.qZA(),t.TgZ(15,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.messageGuest(r.initiatedBy))}),t._uU(16," Message Guest "),t.qZA()()()}if(2&n){const e=t.MAs(6),a=t.oxw();t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(7),t.Q6J("disabled",a.statusLoading),t.xp6(1),t.hij(" ",a.statusLoading?"Loading...":"Approve"," "),t.xp6(1),t.Q6J("disabled",a.statusLoading),t.xp6(1),t.hij(" ",a.statusLoading?"Loading...":"Disapproved"," ")}}function Zn(n,i){1&n&&t._UZ(0,"tr",43)}function kn(n,i){1&n&&t._UZ(0,"tr",44)}function An(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function Dn(n,i){1&n&&(t.TgZ(0,"span",49),t._UZ(1,"mat-spinner",50),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function Sn(n,i){if(1&n&&(t.TgZ(0,"tr",45)(1,"td",46),t.YNc(2,An,2,0,"span",47),t.YNc(3,Dn,3,1,"span",48),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const Un=function(){return[5,10,25,100]};let Nn=(()=>{class n{constructor(e,a,o,r,s,y){this.dialog=e,this._util=a,this._changeDetector=o,this._booking=r,this._token=s,this._auth=y,this.title="Cancelled",this.dateToday=new Date,this.displayedColumns=["property","guestnames","status","reasons","action"],this.dataSource=new c.by([]),this._subs=new T.w0,this._modelChanged=new q.x,this.debTime=500,this._snack=(0,t.f3M)(x.ux),this.total=0,this.isLoading=!1,this.statusLoading=!1,this.searchKey=""}ngOnDestroy(){this._subs&&this._subs.unsubscribe()}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getCancelledBookings(this.token.sub,a,e,this.searchKey).subscribe({next:o=>{this.dataSource=new c.by(o.bookings),this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}viewDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e})}viewProfile(e){this.dialog.open(u.W,{disableClose:!0,panelClass:"custom-view-profile-dialog",data:e})}messageGuest(e){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"27rem",data:e})}handleTableChanges(e,a){const o=this.dataSource.data,r=o.findIndex(s=>s._id===a);-1!==r&&(o[r]={...o[r],cancel:{...o[r].cancel,status:e}},this.dataSource.data=[...o])}approveCancellation(e){const a=e.initiatedBy?.fullName;this.dialog.open(N.S,{width:"100%",maxWidth:"25rem",data:{title:"Approve Cancellation",description:`Are you sure you want to approve the cancellation of this booking?\n        Guest: ${a}\n        Property: ${e.bookTo.name}`,yesBtnText:"Proceed",noBtnText:"Cancel"}}).afterClosed().subscribe(({confirm:s})=>{if(s){const y=e.cancel._id,k=e._id;this.statusLoading=!0,this._subs.add(this._auth.csrfToken().pipe((0,p.w)(b=>this._booking.approveCancellation(k,y,b.token)),(0,_.K)(b=>(0,Q._)(()=>b))).subscribe({next:b=>{this.statusLoading=!1,this.handleTableChanges(b.cancelStatus,e._id),this._snack.open("Approved successfully!","",{duration:1e3})},error:({error:b})=>{this._snack.open(b.msg||b.code||"Failed to deny the booking cancellation request.","Ok"),this.statusLoading=!1}}))}})}denyCancellation(e){const a=e.initiatedBy?.fullName,o=e.bookTo.name;this.statusLoading=!0,this.dialog.open(N.S,{width:"100%",maxWidth:"25rem",data:{title:"Deny Cancellation",description:`Are you sure you want to deny the cancellation of this booking?\n        Guest: ${a}\n        Property: ${o}`,yesBtnText:"Proceed",noBtnText:"Cancel"}}).afterClosed().subscribe(({confirm:s})=>{if(s){const y=e.cancel._id,k=e._id;this._subs.add(this._auth.csrfToken().pipe((0,p.w)(b=>this._booking.denyCancellation(k,y,b.token)),(0,_.K)(b=>(0,Q._)(()=>b))).subscribe({next:b=>{this.statusLoading=!1,this.handleTableChanges(b.cancelStatus,e._id),this._snack.open("Denied successfully!","",{duration:1e3})},error:({error:b})=>{this._snack.open(b.msg||b.code||"Failed to deny the booking cancellation request.","Ok"),this.statusLoading=!1}}))}})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B),t.Y36(U.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cancelled-booking"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:32,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"header_title_date"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",2,"table-layout","auto",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","reasons"],["mat-cell","","class","name","style","white-space: pre",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","width: fit-content",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSizeOptions","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],[2,"text-transform","capitalize"],["mat-cell","",1,"name",2,"white-space","pre"],["mat-header-cell","",2,"white-space","pre","text-align","center"],["mat-cell","",2,"width","fit-content"],[1,"action_btn"],["mat-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell","td-no-value"],[4,"ngIf"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6,"Cancelled"),t.qZA()(),t.TgZ(7,"div",6)(8,"input",7),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(9,"mat-icon"),t._uU(10,"search"),t.qZA()(),t.TgZ(11,"div",8)(12,"table",9),t.ynx(13,10),t.YNc(14,bn,2,0,"th",11),t.YNc(15,Cn,5,2,"td",12),t.BQk(),t.ynx(16,13),t.YNc(17,vn,2,0,"th",14),t.YNc(18,yn,5,2,"td",15),t.BQk(),t.ynx(19,16),t.YNc(20,wn,2,0,"th",14),t.YNc(21,xn,3,1,"td",12),t.BQk(),t.ynx(22,17),t.YNc(23,Mn,2,0,"th",14),t.YNc(24,On,3,1,"td",18),t.BQk(),t.ynx(25,19),t.YNc(26,Tn,2,0,"th",20),t.YNc(27,Pn,17,5,"td",21),t.BQk(),t.YNc(28,Zn,1,0,"tr",22),t.YNc(29,kn,1,0,"tr",23),t.YNc(30,Sn,4,2,"tr",24),t.qZA(),t.TgZ(31,"mat-paginator",25),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(8),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.total)("pageSizeOptions",t.DdM(7,Un)))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,H.VK,H.OP,H.p6,m.Fj,m.JJ,m.On,O.Ou],styles:[".today-tabs-today-tabs-wrapper .content{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper .content .title{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper .content .search{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper .content .search input{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper .content .search mat-icon{color:#63ab68}.today-tabs-today-tabs-wrapper .content .table-container{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper .content .table-container tr td.td-no-value{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-property .name{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .img{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-guest .name{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper .content .mat-table-responsive .custom-checkinout{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper .content .action_btn{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper .content .action_btn button{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper .content .action_btn button mat-icon{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper .content .no-checking{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper .content .title{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper .content .search{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper .content .mat-table-responsive{display:block}}\n"],encapsulation:2,data:{animation:[w.B]}})}return n})();function qn(n,i){1&n&&(t.TgZ(0,"th",26),t._uU(1," Property "),t.qZA())}function Bn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",28),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.bookTo?null:e.bookTo.cover),t.LSH),t.xp6(2),t.Oqu(null==e.bookTo?null:e.bookTo.name)}}function Yn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Booked guest "),t.qZA())}function In(n,i){if(1&n&&(t.TgZ(0,"td",32)(1,"div",33),t._UZ(2,"img",29),t.TgZ(3,"div",30),t._uU(4),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(2),t.s9C("src",a.setSrc(null==e.initiatedBy?null:e.initiatedBy.img),t.LSH),t.xp6(2),t.Oqu(null==e.initiatedBy?null:e.initiatedBy.fullName)}}function Ln(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," No. of Guest "),t.qZA())}function Gn(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setTotalGuest(e.details)," ")}}function Jn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Date booked "),t.qZA())}function Qn(n,i){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortDate")," ")}}function Hn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Reservation Date "),t.qZA())}function Rn(n,i){if(1&n&&(t.TgZ(0,"td",27)(1,"div",34)(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div"),t._uU(6,"-"),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"date"),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,2,null==e.duration?null:e.duration.start,"shortDate")," "),t.xp6(5),t.hij(" ",t.xi3(9,5,null==e.duration?null:e.duration.end,"shortDate")," ")}}function Fn(n,i){1&n&&(t.TgZ(0,"th",31),t._uU(1," Interval "),t.qZA())}function $n(n,i){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.setInterval(e.duration)," ")}}function zn(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Action "),t.qZA())}function jn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewForApprovalDetails(r))}),t.TgZ(2,"button")(3,"mat-icon"),t._uU(4,"remove_red_eye"),t.qZA()()()()}}function En(n,i){1&n&&t._UZ(0,"tr",38)}function Vn(n,i){1&n&&t._UZ(0,"tr",39)}function Kn(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"No Booking Found"),t.qZA())}function Wn(n,i){1&n&&(t.TgZ(0,"span",44),t._UZ(1,"mat-spinner",45),t._uU(2," Loading data..."),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",15))}function Xn(n,i){if(1&n&&(t.TgZ(0,"tr",40)(1,"td",41),t.YNc(2,Kn,2,0,"span",42),t.YNc(3,Wn,3,1,"span",43),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.isLoading),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}const to=function(){return[5,10,25,100]};let eo=(()=>{class n{constructor(e,a,o,r,s,y){this.dialog=e,this._util=a,this._dialog=o,this._changeDetector=r,this._booking=s,this._token=y,this.status="For Approval",this.dateToday=new Date,this.displayedColumns=["property","guestnames","numofguest","bookingdate","reservationdate","interval","action"],this.dataSource=new c.by([]),this.total=0,this.isLoading=!1,this.searchKey="",this._subs=new T.w0,this._snack=(0,t.f3M)(x.ux),this._modelChanged=new q.x,this.debTime=500}ngOnInit(){this.dataSource.paginator=this.paginator,this.token=this._token.decodedToken(),this._subs.add(this._modelChanged.pipe((0,L.b)(this.debTime)).subscribe(()=>{this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)}))}ngAfterViewInit(){this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1),this.dataSource.paginator=this.paginator,this._changeDetector.detectChanges()}_getBookings(e,a){this.dataSource=new c.by([]),this.isLoading=!0,this._subs.add(this._booking.getBookingByType(this.token.sub,"for_approval",a,e,this.searchKey).subscribe({next:o=>{this.dataSource=o.bookings,this.total=o.totalCount,this.isLoading=!1},error:o=>{this._snack.open(o.error.code,"",{duration:1e3}),this.isLoading=!1}}))}handleSearch(e){this._modelChanged.next(e.target.value)}handlePageChange(e){this._getBookings(e.pageSize,e.pageIndex+1)}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}viewForApprovalDetails(e){this.dialog.open(I,{width:"99vw",maxWidth:"60rem",height:"99vh",maxHeight:"50rem",data:e}).afterClosed().subscribe(o=>{o&&this._getBookings(this.paginator.pageSize,this.paginator.pageIndex+1)})}viewProfile(){this.dialog.open(u.W,{width:"99vw",maxWidth:"80rem",height:"99vh",maxHeight:"50rem",data:""})}messageGuest(){this.dialog.open(Y,{width:"99vw",maxWidth:"33rem",height:"99vh",maxHeight:"24rem",data:""})}openValidationModal(){this.dialog.open(R,{width:"100%",height:"100%",maxHeight:"17rem",maxWidth:"30rem",data:""})}setSrc(e){return e.includes("gravatar.com")?e:this._util.setImgUrl(e)}setTotalGuest(e){const{adult:a,children:o,infant:r,pets:s}=e;return a+o+r+s}setInterval(e){let a=v(e.start,"MM/DD/YYY");const r=v(e.end,"MM/DD/YYY").diff(a,"days");return`${r} day${r>1?"s":""}`}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(f.uw),t.Y36(D.M),t.Y36(f.uw),t.Y36(t.sBO),t.Y36(Z.q),t.Y36(A.B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-for-approval"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.NW,7),2&a){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},decls:37,vars:8,consts:[[1,"today-tabs"],[1,"today-tabs-today-tabs-wrapper"],[1,"content"],[1,"mat-elevation-z3"],[1,"title"],[1,"search"],["matInput","","placeholder","Search here..",3,"ngModel","ngModelChange","input"],[1,"table-container"],["mat-table","",1,"mat-table-responsive",3,"dataSource"],["matColumnDef","property"],["mat-header-cell","","style","width: 10rem",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestnames"],["mat-header-cell","","style","white-space: pre",4,"matHeaderCellDef"],["mat-cell","","class","name",4,"matCellDef"],["matColumnDef","numofguest"],["matColumnDef","bookingdate"],["matColumnDef","reservationdate"],["matColumnDef","interval"],["mat-cell","","style","white-space: pre",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","white-space: pre; text-align: center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions","length","page"],["mat-header-cell","",2,"width","10rem"],["mat-cell",""],[1,"custom-property"],["alt","property",1,"img",3,"src"],[1,"name"],["mat-header-cell","",2,"white-space","pre"],["mat-cell","",1,"name"],[1,"custom-guest"],[1,"custom-checkinout"],["mat-cell","",2,"white-space","pre"],["mat-header-cell","",2,"white-space","pre","text-align","center"],[1,"action_btn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","td-no-value"],[4,"ngIf"],["style","\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                  ",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center","gap","0.5rem"],[3,"diameter"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"For approval"),t.qZA(),t.TgZ(6,"div",5)(7,"input",6),t.NdJ("ngModelChange",function(s){return o.searchKey=s})("input",function(s){return o.handleSearch(s)}),t.qZA(),t.TgZ(8,"mat-icon"),t._uU(9,"search"),t.qZA()(),t.TgZ(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,qn,2,0,"th",10),t.YNc(14,Bn,5,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,Yn,2,0,"th",13),t.YNc(17,In,5,2,"td",14),t.BQk(),t.ynx(18,15),t.YNc(19,Ln,2,0,"th",13),t.YNc(20,Gn,2,1,"td",11),t.BQk(),t.ynx(21,16),t.YNc(22,Jn,2,0,"th",13),t.YNc(23,Qn,3,4,"td",11),t.BQk(),t.ynx(24,17),t.YNc(25,Hn,2,0,"th",13),t.YNc(26,Rn,10,8,"td",11),t.BQk(),t.ynx(27,18),t.YNc(28,Fn,2,0,"th",13),t.YNc(29,$n,2,1,"td",19),t.BQk(),t.ynx(30,20),t.YNc(31,zn,2,0,"th",21),t.YNc(32,jn,5,0,"td",11),t.BQk(),t.YNc(33,En,1,0,"tr",22),t.YNc(34,Vn,1,0,"tr",23),t.YNc(35,Xn,4,2,"tr",24),t.qZA(),t.TgZ(36,"mat-paginator",25),t.NdJ("page",function(s){return o.handlePageChange(s)}),t.qZA()()()()()()),2&a&&(t.Q6J("@fadeInAnimation",void 0),t.xp6(7),t.Q6J("ngModel",o.searchKey),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,to))("length",o.total))},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,C.NW,B.Nt,M.Hw,m.Fj,m.JJ,m.On,O.Ou,d.uU],styles:[".today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:50vh;max-height:40rem;margin:1rem 0;border-radius:20px}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;padding:1rem 1rem 0}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;margin:1rem;width:100%;max-width:20rem;padding:.5rem 1rem;border:1px solid rgb(190,190,190);border-radius:10px}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;outline:none}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#63ab68}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{padding-bottom:1rem;max-width:100%;width:100%;overflow:auto}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.td-no-value[_ngcontent-%COMP%]{padding:1rem 0;text-align:center}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;padding-bottom:1rem!important}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-property[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-property[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:5px}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-property[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:none;width:auto;max-width:15rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-guest[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-guest[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:2.3rem;height:2.3rem;object-fit:cover;border:1px solid #a0a0a0;border-radius:100%}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-guest[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:none;width:auto;max-width:12rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]   .custom-checkinout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto;display:flex;gap:.5rem}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:none;background-color:transparent;outline:none;margin:auto;color:#fff;padding:0 .5rem;background-color:#000;border-radius:3px;cursor:pointer}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .action_btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;display:grid;place-content:center;font-size:20px}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .no-checking[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}@media only screen and (max-width: 500px){.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:auto;width:-moz-fit-content;width:fit-content}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin:auto;margin-top:1rem}.today-tabs-today-tabs-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-table-responsive[_ngcontent-%COMP%]{display:block}}"],data:{animation:[w.B]}})}return n})();function no(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-for-approval"),t.qZA())}function oo(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-upcoming"),t.qZA())}function ao(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-arriving-soon"),t.qZA())}function io(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-currently-guest"),t.qZA())}function ro(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-checking-out"),t.qZA())}function so(n,i){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-cancelled-booking"),t.qZA())}const G=function(n){return{active:n}},co=[{path:"",component:(()=>{class n{constructor(){this.selectedTab="tab0"}selectTab(e){this.selectedTab=e}static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-today"]],decls:22,vars:24,consts:[[1,"today"],[1,"today-content-tab"],[1,"custom-tabs"],[1,"tab","animated-border",3,"ngClass","click"],[1,"tab-content"],[4,"ngIf"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3),t.NdJ("click",function(){return o.selectTab("tab0")}),t._uU(4,"For Approval"),t.qZA(),t.TgZ(5,"div",3),t.NdJ("click",function(){return o.selectTab("tab1")}),t._uU(6,"Upcoming"),t.qZA(),t.TgZ(7,"div",3),t.NdJ("click",function(){return o.selectTab("tab2")}),t._uU(8,"Arriving"),t.qZA(),t.TgZ(9,"div",3),t.NdJ("click",function(){return o.selectTab("tab3")}),t._uU(10,"Current Guest"),t.qZA(),t.TgZ(11,"div",3),t.NdJ("click",function(){return o.selectTab("tab4")}),t._uU(12,"Check Out"),t.qZA(),t.TgZ(13,"div",3),t.NdJ("click",function(){return o.selectTab("tab6")}),t._uU(14,"Cancelled"),t.qZA()(),t.TgZ(15,"div",4),t.YNc(16,no,2,0,"div",5),t.YNc(17,oo,2,0,"div",5),t.YNc(18,ao,2,0,"div",5),t.YNc(19,io,2,0,"div",5),t.YNc(20,ro,2,0,"div",5),t.YNc(21,so,2,0,"div",5),t.qZA()()()),2&a&&(t.xp6(3),t.Q6J("ngClass",t.VKq(12,G,"tab0"===o.selectedTab)),t.xp6(2),t.Q6J("ngClass",t.VKq(14,G,"tab1"===o.selectedTab)),t.xp6(2),t.Q6J("ngClass",t.VKq(16,G,"tab2"===o.selectedTab)),t.xp6(2),t.Q6J("ngClass",t.VKq(18,G,"tab3"===o.selectedTab)),t.xp6(2),t.Q6J("ngClass",t.VKq(20,G,"tab4"===o.selectedTab)),t.xp6(2),t.Q6J("ngClass",t.VKq(22,G,"tab6"===o.selectedTab)),t.xp6(3),t.Q6J("ngIf","tab0"===o.selectedTab),t.xp6(1),t.Q6J("ngIf","tab1"===o.selectedTab),t.xp6(1),t.Q6J("ngIf","tab2"===o.selectedTab),t.xp6(1),t.Q6J("ngIf","tab3"===o.selectedTab),t.xp6(1),t.Q6J("ngIf","tab4"===o.selectedTab),t.xp6(1),t.Q6J("ngIf","tab6"===o.selectedTab))},dependencies:[d.mk,d.O5,Gt,fe,Ie,fn,Nn,eo],styles:['.today[_ngcontent-%COMP%]{font-family:Poppins-Regular;flex:1;display:flex;flex-direction:column}.today[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1rem 0;font-size:clamp(1rem,4vw,1.2rem)}.today-content-tab[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100vh}.today-content-tab[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:1rem 0 0}.today-content-tab[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:10px 20px;cursor:pointer;white-space:pre;border-bottom:none;border-radius:5px 5px 0 0;margin-right:10px}.today-content-tab[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%], .today-content-tab[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{font-weight:700;color:#63ab68}.today-content-tab[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{border-radius:0 0 5px 5px}.today-content-tab[_ngcontent-%COMP%]   .animated-border[_ngcontent-%COMP%]{border-bottom:none;position:relative;cursor:pointer}.today-content-tab[_ngcontent-%COMP%]   .animated-border[_ngcontent-%COMP%]:after{content:"";display:block;width:0;height:2px;background-color:#63ab68;position:absolute;bottom:0;left:0;transition:width .3s ease-in-out}.today-content-tab[_ngcontent-%COMP%]   .animated-border[_ngcontent-%COMP%]:hover:after, .today-content-tab[_ngcontent-%COMP%]   .animated-border.active[_ngcontent-%COMP%]:after{width:100%}@media only screen and (max-width: 1080px){.today[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:1rem}}']})}return n})()}];let lo=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(co),h.Bz]})}return n})();var F=g(3238);g(7340);let $=(()=>{class n{constructor(){this.changes=new q.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mo={provide:$,deps:[[new t.FiY,new t.tp0,$]],useFactory:function po(n){return n||new $}};let go=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[mo],imports:[d.ez,F.BQ]}),n})();var uo=g(9549),_o=g(5905);let ho=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,c.p0,C.TU,go,uo.lN,B.c,M.Ps,H.Tx,_o.l,m.u5,O.Cq,m.UX]})}return n})();var fo=g(3848);let bo=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,lo,fo.Nh,ho]})}return n})()},2169:(J,P,g)=>{g.d(P,{q:()=>w});var d=g(2340),h=g(4650),t=g(529);let w=(()=>{class c{constructor(u){this._http=u}tempBooking(u,p){return this._http.post(`${d.N.api}/api/booking/post/temp-add-booking`,u,{withCredentials:!0,headers:{"X-XSRF-TOKEN":p}})}getBookingByType(u,p,_,m,f){let x={};return""!==f&&(x.search=f),this._http.get(`${d.N.api}/api/booking/get/list/${u}/${_}/${m}/${p}`,{params:{...x}})}updateBookingStatus(u,p,_){return this._http.post(`${d.N.api}/api/booking/post/update-booking-status/${u}`,{status:p},{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}getBookingGuests(u){return this._http.get(`${d.N.api}/api/booking/get/guest-list/${u}`)}addGuest(u,p,_){return this._http.post(`${d.N.api}/api/booking/post/add-guest/${u}`,p,{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}checkOutGuest(u,p,_){return this._http.post(`${d.N.api}/api/booking/post/checkout-guest/${u}`,p,{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}getBookingsByGuestId(u,p,_,m){let f={limit:u,page:p,type:_};return""!==m&&(f.search=m),this._http.get(`${d.N.api}/api/booking/get/trips`,{params:{...f}})}cancelBooking(u,p){return this._http.post(`${d.N.api}/api/booking/post/cancel-booking`,u,{withCredentials:!0,headers:{"X-XSRF-TOKEN":p}})}bookingCheckIn(u,p){return this._http.post(`${d.N.api}/api/booking/post/check-in/${u}`,{},{withCredentials:!0,headers:{"X-XSRF-TOKEN":p}})}bookingCheckOut(u,p){return this._http.post(`${d.N.api}/api/booking/post/check-out/${u}`,{},{withCredentials:!0,headers:{"X-XSRF-TOKEN":p}})}getCancelledBookings(u,p,_,m){let f={};return""!==m&&(f.search=m),this._http.get(`${d.N.api}/api/booking/get/cancelled/${u}/${p}/${_}`,{params:{...f}})}approveCancellation(u,p,_){return this._http.post(`${d.N.api}/api/booking/post/approve-cancel/${u}/${p}`,{},{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}denyCancellation(u,p,_){return this._http.post(`${d.N.api}/api/booking/post/deny-cancel/${u}/${p}`,{},{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}static#t=this.\u0275fac=function(p){return new(p||c)(h.LFG(t.eN))};static#e=this.\u0275prov=h.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},2684:(J,P,g)=>{g.d(P,{e:()=>w});var d=g(2340),h=g(4650),t=g(529);let w=(()=>{class c{constructor(u){this._http=u}messageProprietor(u,p,_){return this._http.post(`${d.N.api}/api/message/post/send-msg/${p}`,u,{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}sendMessage(u,p,_){return this._http.post(`${d.N.api}/api/message/post/send-msg/${p}`,u,{withCredentials:!0,headers:{"X-XSRF-TOKEN":_}})}getMessageRoomsByUserId(u){return this._http.get(`${d.N.api}/api/message/get/rooms/${u}`)}getRoomMessages(u,p,_){return this._http.get(`${d.N.api}/api/message/get/message-thread/${u}/${_}/${p}`)}static#t=this.\u0275fac=function(p){return new(p||c)(h.LFG(t.eN))};static#e=this.\u0275prov=h.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);