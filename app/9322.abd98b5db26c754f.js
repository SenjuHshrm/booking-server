"use strict";(self.webpackChunkbooking_app=self.webpackChunkbooking_app||[]).push([[9322],{9322:(q,d,s)=>{s.r(d),s.d(d,{SecuritySettingsModule:()=>F});var c=s(5412),g=s(6895),m=s(9299),f=s(727),n=s(4650),_=s(3900),P=s(262),r=s(4006),l=s(7009),y=s(7556),w=s(1321),u=s(7392);function C(e,a){if(1&e&&(n.TgZ(0,"span",20),n._uU(1),n.qZA()),2&e){const o=n.oxw().$implicit;n.xp6(1),n.hij(" ",o.msg," ")}}function M(e,a){if(1&e&&(n.ynx(0),n.YNc(1,C,2,1,"span",19),n.BQk()),2&e){const o=a.$implicit,t=n.oxw();n.xp6(1),n.Q6J("ngIf",(null==t.pwForm.controls.currentPassword?null:t.pwForm.controls.currentPassword.hasError(o.type))&&((null==t.pwForm.controls.currentPassword?null:t.pwForm.controls.currentPassword.dirty)||(null==t.pwForm.controls.currentPassword?null:t.pwForm.controls.currentPassword.touched)))}}function O(e,a){if(1&e&&(n.TgZ(0,"span",20),n._uU(1),n.qZA()),2&e){const o=n.oxw().$implicit;n.xp6(1),n.hij(" ",o.msg," ")}}function h(e,a){if(1&e&&(n.ynx(0),n.YNc(1,O,2,1,"span",19),n.BQk()),2&e){const o=a.$implicit,t=n.oxw();n.xp6(1),n.Q6J("ngIf",(null==t.pwForm.controls.newPassword?null:t.pwForm.controls.newPassword.hasError(o.type))&&((null==t.pwForm.controls.newPassword?null:t.pwForm.controls.newPassword.dirty)||(null==t.pwForm.controls.newPassword?null:t.pwForm.controls.newPassword.touched)))}}function v(e,a){if(1&e&&(n.TgZ(0,"span",20),n._uU(1),n.qZA()),2&e){const o=n.oxw().$implicit;n.xp6(1),n.hij(" ",o.msg," ")}}function b(e,a){if(1&e&&(n.ynx(0),n.YNc(1,v,2,1,"span",19),n.BQk()),2&e){const o=a.$implicit,t=n.oxw();n.xp6(1),n.Q6J("ngIf",(null==t.pwForm.controls.confirmPassword?null:t.pwForm.controls.confirmPassword.hasError(o.type))&&((null==t.pwForm.controls.confirmPassword?null:t.pwForm.controls.confirmPassword.dirty)||(null==t.pwForm.controls.confirmPassword?null:t.pwForm.controls.confirmPassword.touched)))}}let x=(()=>{class e{constructor(o,t,i,p,k,U,A){this._fb=o,this._d=t,this.id=i,this._sb=p,this._auth=k,this._token=U,this.dialogLogin=A,this.validation={currentPassword:[{type:"required",msg:"Type your current password"}],newPassword:[{type:"required",msg:"Type your new password"}],confirmPassword:[{type:"required",msg:"Confirm your new password"},{type:"equal",msg:"Password did't match your new password"}]},this._sub=new f.w0,this._snack=(0,n.f3M)(l.ux)}ngOnInit(){this._t=this._token.decodedToken(),this.pwForm=this._fb.group({currentPassword:new r.NI("",[r.kI.required]),newPassword:new r.NI("",[r.kI.required]),confirmPassword:new r.NI("",[r.kI.required])},{validators:o=>{let t=o.get("newPassword")?.value,i=o.get("confirmPassword")?.value;return t!==i&&o.get("confirmPassword")?.setErrors({equal:!0}),t===i?null:{equal:!0}}})}ngOnDestroy(){this._sub.unsubscribe()}closeDialog(){this.dialogLogin.close()}handleSubmit(o){this._sub.add(this._auth.csrfToken().pipe((0,_.w)(t=>this._auth.updatePassword(this.id,o.value.newPassword,t.token)),(0,P.K)(t=>t)).subscribe({next:t=>{this._showSnackbar("Password updated successfully"),this._d.close()},error:({error:t})=>{this._snack.open(t.code,"",{duration:1e3})}}))}_showSnackbar(o){this._sb.open(o,"OK",{duration:1500})}static#n=this.\u0275fac=function(t){return new(t||e)(n.Y36(r.qu),n.Y36(c.so),n.Y36(c.WI),n.Y36(l.ux),n.Y36(y.e),n.Y36(w.B),n.Y36(c.so))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-security-settings-modal"]],decls:35,vars:5,consts:[[1,"payment-wallet"],[1,"header"],[1,"title_wrapper"],[1,"info_title"],[1,"close-button-normal",3,"click"],[2,"margin-top","3px"],[1,"payment-wallet-payment-wallet-wrapper"],[3,"formGroup","ngSubmit"],[1,"your-information-about-your-info"],[1,"your-likes"],[1,"info"],[1,"input-wrapper"],[1,"label"],["type","password","name","currentPassword","formControlName","currentPassword","required",""],[4,"ngFor","ngForOf"],["type","password","name","newPassword","formControlName","newPassword","required",""],["type","password","name","confirmPassword","formControlName","confirmPassword","required",""],[1,"btn-sec"],["type","submit",1,"main-button",3,"disabled"],["class","val-err-msg",4,"ngIf"],[1,"val-err-msg"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n._uU(4,"Change your security"),n.qZA()(),n.TgZ(5,"div",4),n.NdJ("click",function(){return i.closeDialog()}),n.TgZ(6,"mat-icon",5),n._uU(7,"close"),n.qZA()()(),n.TgZ(8,"div"),n._UZ(9,"hr"),n.qZA(),n.TgZ(10,"div",6)(11,"form",7),n.NdJ("ngSubmit",function(){return i.handleSubmit(i.pwForm)}),n.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12),n._uU(17,"Current Password"),n.qZA(),n._UZ(18,"input",13),n.YNc(19,M,2,1,"ng-container",14),n.qZA(),n.TgZ(20,"div",11)(21,"div",12),n._uU(22,"New Password"),n.qZA(),n._UZ(23,"input",15),n.YNc(24,h,2,1,"ng-container",14),n.qZA(),n.TgZ(25,"div",11)(26,"div",12),n._uU(27,"Confirm Password"),n.qZA(),n._UZ(28,"input",16),n.YNc(29,b,2,1,"ng-container",14),n.qZA()()()(),n.TgZ(30,"div"),n._UZ(31,"hr"),n.qZA(),n.TgZ(32,"div",17)(33,"button",18),n._uU(34,"Done"),n.qZA()()()()()),2&t&&(n.xp6(11),n.Q6J("formGroup",i.pwForm),n.xp6(8),n.Q6J("ngForOf",i.validation.currentPassword),n.xp6(5),n.Q6J("ngForOf",i.validation.newPassword),n.xp6(5),n.Q6J("ngForOf",i.validation.confirmPassword),n.xp6(4),n.Q6J("disabled",!i.pwForm.valid))},dependencies:[g.sg,g.O5,u.Hw,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".payment-wallet[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;height:100%;overflow-y:auto}.payment-wallet[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex:0;padding:1rem;flex:none;display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;align-items:center}.payment-wallet[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title_wrapper[_ngcontent-%COMP%]   .info_title[_ngcontent-%COMP%]{font-size:clamp(1rem,.9vw,8rem);text-align:left;font-weight:700}.payment-wallet[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title_wrapper[_ngcontent-%COMP%]   .sub_title[_ngcontent-%COMP%]{color:#8f8f8f}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%], .payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow-y:auto}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:1rem;overflow-y:auto}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]   .your-likes[_ngcontent-%COMP%]{padding:1rem;overflow-y:auto;flex:1}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]   .your-likes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1rem,1vw,8rem)}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]   .your-likes[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;width:100%}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]   .your-likes[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:.3rem}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .your-information-about-your-info[_ngcontent-%COMP%]   .your-likes[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem;border:2px solid #63AB68;width:100%;border-radius:10px;font-family:Poppins-Medium;font-size:15px}.payment-wallet-payment-wallet-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-sec[_ngcontent-%COMP%]{padding:1rem}"]})}return e})();var Z=s(3071);const S=[{path:"",component:(()=>{class e{constructor(o,t,i){this.dialog=o,this._user=t,this._token=i,this.email="",this._sub=new f.w0,this._snack=(0,n.f3M)(l.ux)}ngOnInit(){this._t=this._token.decodedToken(),this._getUserDetails()}ngOnDestroy(){this._sub.unsubscribe()}openSecModalDialog(){this.dialog.open(x,{width:"100%",height:"100%",maxHeight:"30rem",maxWidth:"35rem",data:this._t.sub}).afterClosed().subscribe(()=>{console.log("The dialog was closed")})}_getUserDetails(){this._sub.add(this._user.getUserProfile(this._t.sub).subscribe({next:o=>{console.log(o),this.email=o.auth.email},error:({error:o})=>{this._snack.open(o.code,"",{duration:1e3})}}))}static#n=this.\u0275fac=function(t){return new(t||e)(n.Y36(c.uw),n.Y36(Z.K),n.Y36(w.B))};static#t=this.\u0275cmp=n.Xpm({type:e,selectors:[["app-security-settings"]],decls:26,vars:1,consts:[[1,"security-settings"],[1,"security-settings-security-settings-wrapper"],[1,"section-1"],[1,"header"],[1,"title"],[1,"sub_title"],[1,"create-profile"],[3,"click"],[1,"content"],[1,"info-details-personal-info"],[1,"info-details-wrapper"],[1,"info-details-label"],[1,"info-password"],["matInput","","type","password","value","************","readonly",""]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4),n._uU(6,"Login & Security"),n.qZA(),n.TgZ(7,"div",5),n._uU(8,"Update your password and secure your account"),n.qZA()(),n.TgZ(9,"div",6)(10,"button",7),n.NdJ("click",function(){return i.openSecModalDialog()}),n.TgZ(11,"mat-icon"),n._uU(12,"edit"),n.qZA(),n._uU(13," Change your security "),n.qZA()()(),n.TgZ(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11),n._uU(18,"Email"),n.qZA(),n.TgZ(19,"div"),n._uU(20),n.qZA()(),n.TgZ(21,"div",10)(22,"div",11),n._uU(23,"Password"),n.qZA(),n.TgZ(24,"div",12),n._UZ(25,"input",13),n.qZA()()()()()()()),2&t&&(n.xp6(20),n.Oqu(i.email))},dependencies:[u.Hw],styles:[".security-settings[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow-y:auto}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]{flex-basis:70%;height:100%;border-radius:10px;display:flex;flex-direction:column;gap:2rem;padding:1rem}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:clamp(1rem,1.2vw,8rem);font-weight:bolder}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .sub_title[_ngcontent-%COMP%]{color:#8f8f8f;margin-top:.5rem}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .create-profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background-color:transparent;color:#68a86a;border:none;cursor:pointer;text-decoration:underline}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-basis:50%;display:flex;flex-direction:column;gap:3rem}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]{width:100%;display:grid}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bolder;font-size:clamp(1rem,1vw,8rem);margin-bottom:1rem}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]{color:#575757;flex-basis:20%;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));border-bottom:1px solid rgb(214,214,214);padding:1rem}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-details-label[_ngcontent-%COMP%]{font-weight:700}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-password[_ngcontent-%COMP%]{display:flex;align-items:center}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;outline:none}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}.security-settings-security-settings-wrapper[_ngcontent-%COMP%]   .section-1[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info-details-personal-info[_ngcontent-%COMP%]   .info-details-wrapper[_ngcontent-%COMP%]   .info-password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#68a86a}"]})}return e})()}];let T=(()=>{class e{static#n=this.\u0275fac=function(t){return new(t||e)};static#t=this.\u0275mod=n.oAB({type:e});static#e=this.\u0275inj=n.cJS({imports:[m.Bz.forChild(S),m.Bz]})}return e})(),F=(()=>{class e{static#n=this.\u0275fac=function(t){return new(t||e)};static#t=this.\u0275mod=n.oAB({type:e});static#e=this.\u0275inj=n.cJS({providers:[l.ZX],imports:[g.ez,T,u.Ps,r.u5,r.UX,c.Is,l.ZX]})}return e})()}}]);