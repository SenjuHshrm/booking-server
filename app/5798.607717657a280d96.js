"use strict";(self.webpackChunkbooking_app=self.webpackChunkbooking_app||[]).push([[5798],{5798:(D,c,s)=>{s.r(c),s.d(c,{SupportingDocsModule:()=>_});var g=s(7009),m=s(1572),a=s(4006),d=s(6895),u=s(9299),f=s(3900),h=s(262),b=s(727),t=s(4650),y=s(3071),C=s(7556),l=s(4859);function M(e,w){if(1&e&&(t.TgZ(0,"button",11),t._uU(1," Upload "),t.qZA()),2&e){const o=t.oxw();t.Q6J("disabled",!o.addDocForm.valid)}}function P(e,w){if(1&e&&t._UZ(0,"mat-progress-spinner",12),2&e){const o=t.oxw();t.Q6J("value",o.uploadProgress)}}const O=[{path:"",component:(()=>{class e{constructor(o,i,r,n,p){this._activatedRoute=o,this._router=i,this._fb=r,this._user=n,this._auth=p,this.uploading=!1,this.uploadProgress=0,this._sub=new b.w0,this._snack=(0,t.f3M)(g.ux),this._token="",this._userId="",this._staycation=""}ngOnInit(){this._activatedRoute.queryParamMap.subscribe(o=>{o.keys.length>0?(this._token=o.get("token"),this._userId=o.get("user"),this._staycation=o.get("staycation"),this._initForm()):this._router.navigate(["/"])})}ngOnDestroy(){this._sub.unsubscribe()}onFileSelected(o){const i=o.target.files;let r=[];for(let n=0;n<i.length;n++)r.push(i[n]);this.addDocForm.get("docs")?.setValue(r)}uploadDocs(o){this.uploading=!0,console.log(o.getRawValue());let i=new FormData,r=[];for(let n=0;n<o.value.docs.length;n++)r.push(this._customFileName(o.value.docs[n],n));i.append("staycationId",this._staycation),i.append("documents",JSON.stringify(r));for(let n=0;n<r.length;n++)i.append("docs",o.value.docs[n],r[n]);this._sub.add(this._auth.csrfToken().pipe((0,f.w)(n=>this._user.uploadSupportDocs(i,this._userId,this._token,n.token)),(0,h.K)(n=>n)).subscribe({next:n=>{"number"==typeof n?this.uploadProgress=n:void 0!==n&&(this.uploading=!1)},error:({error:n})=>{this._snack.open(n.code,"",{duration:1e3})}}))}_initForm(){this.addDocForm=this._fb.group({docs:new a.NI("",[a.kI.required])})}_customFileName(o,i){let r=o.name,n=r.lastIndexOf("."),p=r.substring(n,r.length);return`${this._staycation}-${i}${p}`}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(u.gz),t.Y36(u.F0),t.Y36(a.qu),t.Y36(y.K),t.Y36(C.e))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-supporting-docs"]],decls:16,vars:3,consts:[[1,"supporting-documents"],[1,"supporting-documents-wrapper"],["src","assets/images/home/header/navigation/tarago.png"],[1,"supporting-form"],[3,"formGroup","ngSubmit"],[1,"input-wrapper"],["for","docs"],["type","file","name","docs","multiple","","required","",3,"change"],[1,"button-wrapper"],["mat-raised-button","","type","submit",3,"disabled",4,"ngIf"],["mode","determinate","color","primary",3,"value",4,"ngIf"],["mat-raised-button","","type","submit",3,"disabled"],["mode","determinate","color","primary",3,"value"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"h1"),t._uU(5,"Upload supporting documents"),t.qZA(),t.TgZ(6,"span"),t._uU(7,"Upload any supporting documents pertaining to your added listing. Files can be a proof of ownership of property, or authorization/permit to rent property from you."),t.qZA(),t.TgZ(8,"form",4),t.NdJ("ngSubmit",function(){return r.uploadDocs(r.addDocForm)}),t.TgZ(9,"div",5)(10,"label",6),t._uU(11,"Upload file"),t.qZA(),t.TgZ(12,"input",7),t.NdJ("change",function(p){return r.onFileSelected(p)}),t.qZA()(),t.TgZ(13,"div",8),t.YNc(14,M,2,1,"button",9),t.qZA(),t.YNc(15,P,1,1,"mat-progress-spinner",10),t.qZA()()()()),2&i&&(t.xp6(8),t.Q6J("formGroup",r.addDocForm),t.xp6(6),t.Q6J("ngIf",!r.uploading),t.xp6(1),t.Q6J("ngIf",r.uploading))},dependencies:[d.O5,a._Y,a.JL,a.sg,m.Ou,l.lW],styles:[".supporting-documents[_ngcontent-%COMP%]{background:rgb(238,255,238);background:linear-gradient(-135deg,rgb(238,255,238) 44%,rgb(130,240,134) 84%);width:100%;height:100%;display:grid;place-items:center;font-family:Poppins-Medium}.supporting-documents-wrapper[_ngcontent-%COMP%]{transform:translateY(-3rem);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.25rem}.supporting-documents-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15rem;min-width:15rem;max-width:15rem;height:auto;object-fit:contain;margin:auto}.supporting-form[_ngcontent-%COMP%]{background-color:#f4f4f4;max-width:45rem;padding:2rem 3rem;border-radius:1rem;box-shadow:5px 5px 5px #8080806e;margin:0 1.5rem}.supporting-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:500;margin-bottom:0;font-family:Poppins-Medium}.supporting-form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#444;font-size:small;margin-bottom:1rem;font-family:Poppins-Medium}.supporting-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.supporting-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.3rem}.supporting-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem;border:2px solid #63ab68;width:100%;border-radius:10px;font-family:Poppins-Medium;font-size:15px}.supporting-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.5rem}.supporting-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#68a968;color:#fff;gap:.3rem;padding:0 2rem;letter-spacing:.1rem;font-family:Poppins-Medium}"]})}return e})()}];let v=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),u.Bz]})}return e})(),_=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[d.ez,v,a.u5,a.UX,m.Cq,g.ZX,l.ot]})}return e})()}}]);